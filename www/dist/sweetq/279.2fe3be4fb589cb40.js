(self.webpackChunksweetq=self.webpackChunksweetq||[]).push([[279],{3713:(ee,yt,V)=>{"use strict";V.d(yt,{Z:()=>G,y:()=>X});var D=V(8274),ct=V(1481);let X=(()=>{class R{constructor(j){this.sanitizer=j}transform(j){return this.sanitizer.bypassSecurityTrustResourceUrl(j)}static#t=this.\u0275fac=function(m){return new(m||R)(D.Y36(ct.H7,16))};static#e=this.\u0275pipe=D.Yjl({name:"safe",type:R,pure:!0})}return R})(),G=(()=>{class R{static#t=this.\u0275fac=function(m){return new(m||R)};static#e=this.\u0275mod=D.oAB({type:R});static#n=this.\u0275inj=D.cJS({})}return R})()},9698:(ee,yt,V)=>{"use strict";V.d(yt,{Z:()=>D});const D={listen:{hash:"U2FsdGVkX18u3a/kwz5awtnhPAK/z0ffjH31VzXrQOYmB/kw6lVtSUuplRUUMstq",chunk1:"U2FsdGVkX1+9PAAaso9C5apmE+AfyGuysske2FIMV/B7SL6ILzDNLLSnyAwtkAdM",chunk2:"U2FsdGVkX1+J/c0NjDeWmLHLQjMlxTyH6tt2+3NI9rI=",artistId:"74Vs2gSCwnlCiV4yjaFIMb",trackId:"4N8LvpnnHhwwBJ5xobXYvr"},track:{ley:"U2FsdGVkX19Sb1m01jh3uhEUh58HS9Ao9%2Fpjod4uEvE%3D",fiesta:"U2FsdGVkX1%2FrKv2bU9NnftdBaRRbRmgMxCD0ezKQV8w%3D",yaesnavidad:"U2FsdGVkX1%2FwRkUZ922wbzCat2AjSUbyMnw195dLZWg%3D"},spotify:{clientId:"MDExNzEzNDkwZDY4NGYyNmFmOWRhYjRiNzc4OWI1YzU=",clientSecret:"OTc5YTM2NTZiNWJmNGY0OGIzNzA2ZDA2OGM2OTY3NTU=",nextRelease:null},appleMusic:{nextRealease:null}}},5072:(ee,yt,V)=>{"use strict";V.d(yt,{s:()=>Lr});var D=V(5861),ct=V(529),X=V(9698),G=V(3172);const R=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,K=Object.keys,j=Array.isArray;function m(e,t){return"object"!=typeof t||K(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||R.Promise||(R.Promise=Promise);const rt=Object.getPrototypeOf,J={}.hasOwnProperty;function W(e,t){return J.call(e,t)}function lt(e,t){"function"==typeof t&&(t=t(rt(e))),(typeof Reflect>"u"?K:Reflect.ownKeys)(t).forEach(n=>{$(e,n,t[n])})}const M=Object.defineProperty;function $(e,t,n,o){M(e,t,m(n&&W(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},o))}function Y(e){return{from:function(t){return e.prototype=Object.create(t.prototype),$(e.prototype,"constructor",e),{extend:lt.bind(null,e.prototype)}}}}const ht=Object.getOwnPropertyDescriptor;function mt(e,t){let n;return ht(e,t)||(n=rt(e))&&mt(n,t)}const st=[].slice;function dt(e,t,n){return st.call(e,t,n)}function St(e,t){return t(e)}function ft(e){if(!e)throw new Error("Assertion Failed")}function Pt(e){R.setImmediate?setImmediate(e):setTimeout(e,0)}function he(e,t){return e.reduce((n,o,s)=>{var u=t(o,s);return u&&(n[u[0]]=u[1]),n},{})}function Ft(e,t){if(W(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],o=0,s=t.length;o<s;++o){var u=Ft(e,t[o]);n.push(u)}return n}var c=t.indexOf(".");if(-1!==c){var f=e[t.substr(0,c)];return void 0===f?void 0:Ft(f,t.substr(c+1))}}function Bt(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){ft("string"!=typeof n&&"length"in n);for(var o=0,s=t.length;o<s;++o)Bt(e,t[o],n[o])}else{var u=t.indexOf(".");if(-1!==u){var c=t.substr(0,u),f=t.substr(u+1);if(""===f)void 0===n?j(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n;else{var h=e[c];h&&W(e,c)||(h=e[c]={}),Bt(h,f,n)}}else void 0===n?j(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Re(e){var t={};for(var n in e)W(e,n)&&(t[n]=e[n]);return t}const en=[].concat;function Te(e){return en.apply([],e)}const Oe="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Te([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>R[e]),nn=Oe.map(e=>R[e]);he(Oe,e=>[e,!0]);let Ct=null;function Nt(e){Ct=typeof WeakMap<"u"&&new WeakMap;const t=fe(e);return Ct=null,t}function fe(e){if(!e||"object"!=typeof e)return e;let t=Ct&&Ct.get(e);if(t)return t;if(j(e)){t=[],Ct&&Ct.set(e,t);for(var n=0,o=e.length;n<o;++n)t.push(fe(e[n]))}else if(nn.indexOf(e.constructor)>=0)t=e;else{const u=rt(e);for(var s in t=u===Object.prototype?{}:Object.create(u),Ct&&Ct.set(e,t),e)W(e,s)&&(t[s]=fe(e[s]))}return t}const{toString:rn}={};function de(e){return rn.call(e).slice(8,-1)}const pe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",on="symbol"==typeof pe?function(e){var t;return null!=e&&(t=e[pe])&&t.apply(e)}:function(){return null},et={};function it(e){var t,n,o,s;if(1===arguments.length){if(j(e))return e.slice();if(this===et&&"string"==typeof e)return[e];if(s=on(e)){for(n=[];!(o=s.next()).done;)n.push(o.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const ne=typeof Symbol<"u"?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var kt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ye(e,t){kt=e,me=t}var me=()=>!0;const De=!new Error("").stack;function xt(){if(De)try{throw new Error}catch(e){return e}return new Error}function zt(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(me).map(o=>"\n"+o).join("")):""}var ge=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],we=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ge),Ke={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function It(e,t){this._e=xt(),this.name=e,this.message=t}function Mt(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,o,s)=>s.indexOf(n)===o).join("\n")}function re(e,t,n,o){this._e=xt(),this.failures=t,this.failedKeys=o,this.successCount=n,this.message=Mt(e,t)}function Vt(e,t){this._e=xt(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Mt(e,t)}Y(It).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+zt(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Y(re).from(It),Y(Vt).from(It);var Gt=we.reduce((e,t)=>(e[t]=t+"Error",e),{});const sn=It;var N=we.reduce((e,t)=>{var n=t+"Error";function o(s,u){this._e=xt(),this.name=n,s?"string"==typeof s?(this.message=`${s}${u?"\n "+u:""}`,this.inner=u||null):"object"==typeof s&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=Ke[t]||n,this.inner=null)}return Y(o).from(sn),e[t]=o,e},{});N.Syntax=SyntaxError,N.Type=TypeError,N.Range=RangeError;var be=ge.reduce((e,t)=>(e[t+"Error"]=N[t],e),{}),Tt=we.reduce((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=N[t]),e),{});function z(){}function Ot(e){return e}function an(e,t){return null==e||e===Ot?t:function(n){return t(e(n))}}function gt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function un(e,t){return e===z?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?gt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?gt(s,this.onerror):s),void 0!==u?u:n}}function a(e,t){return e===z?t:function(){e.apply(this,arguments);var n=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?gt(n,this.onsuccess):n),o&&(this.onerror=this.onerror?gt(o,this.onerror):o)}}function r(e,t){return e===z?t:function(n){var o=e.apply(this,arguments);m(n,o);var s=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?gt(s,this.onsuccess):s),u&&(this.onerror=this.onerror?gt(u,this.onerror):u),void 0===o?void 0===c?void 0:c:m(o,c)}}function i(e,t){return e===z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function l(e,t){return e===z?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var o=this,s=arguments.length,u=new Array(s);s--;)u[s]=arguments[s];return n.then(function(){return t.apply(o,u)})}return t.apply(this,arguments)}}Tt.ModifyError=re,Tt.DexieError=It,Tt.BulkError=Vt;var d={};const[b,v,q]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,rt(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,rt(t),e]})(),nt=v&&v.then,Z=b&&b.constructor,Q=!!q;var H=!1,hr=q?()=>{q.then(Me)}:R.setImmediate?setImmediate.bind(null,Me):R.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Me(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Me,0)},ve=function(e,t){_e.push([e,t]),Ue&&(hr(),Ue=!1)},cn=!0,Ue=!0,Yt=[],je=[],ln=null,hn=Ot,ie={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Gn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Gn(e[0],e[1])}catch{}})}},U=ie,_e=[],Ht=0,Ne=[];function C(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=z,this._lib=!1;var t=this._PSD=U;if(kt&&(this._stackHolder=xt(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==d)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&dn(this,this._value))}this._state=null,this._value=null,++t.ref,Mn(this,e)}const fn={get:function(){var e=U,t=qe;function n(o,s){var u=!e.global&&(e!==U||t!==qe);const c=u&&!Dt();var f=new C((h,g)=>{pn(this,new Nn(ze(o,e,u,c),ze(s,e,u,c),h,g,e))});return kt&&qn(f,this),f}return n.prototype=d,n},set:function(e){$(this,"then",e&&e.prototype===d?fn:{get:function(){return e},set:fn.set})}};function Nn(e,t,n,o,s){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o,this.psd=s}function Mn(e,t){try{t(n=>{if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var o=e._lib&&xe();n&&"function"==typeof n.then?Mn(e,(s,u)=>{n instanceof C?n._then(s,u):n.then(s,u)}):(e._state=!0,e._value=n,$n(e)),o&&Ee()}},dn.bind(null,e))}catch(n){dn(e,n)}}function dn(e,t){if(je.push(t),null===e._state){var n=e._lib&&xe();t=hn(t),e._state=!1,e._value=t,kt&&null!==t&&"object"==typeof t&&!t._promise&&function(o,s,u){try{(()=>{var o=mt(t,"stack");t._promise=e,$(t,"stack",{get:()=>H?o&&(o.get?o.get.apply(t):o.value):e.stack})}).apply(null,void 0)}catch(c){}}(),o=e,Yt.some(s=>s._value===o._value)||Yt.push(o),$n(e),n&&Ee()}var o}function $n(e){var t=e._listeners;e._listeners=[];for(var n=0,o=t.length;n<o;++n)pn(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Ht&&(++Ht,ve(()=>{0==--Ht&&yn()},[]))}function pn(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ht,ve(fr,[n,e,t])}else e._listeners.push(t)}function fr(e,t,n){try{ln=t;var o,s=t._value;t._state?o=e(s):(je.length&&(je=[]),o=e(s),-1===je.indexOf(s)&&function(u){for(var c=Yt.length;c;)if(Yt[--c]._value===u._value)return void Yt.splice(c,1)}(t)),n.resolve(o)}catch(u){n.reject(u)}finally{ln=null,0==--Ht&&yn(),--n.psd.ref||n.psd.finalize()}}function Ln(e,t,n){if(t.length===n)return t;var o="";if(!1===e._state){var s,u,c=e._value;null!=c?(s=c.name||"Error",u=c.message||c,o=zt(c,0)):(s=c,u=""),t.push(s+(u?": "+u:"")+o)}return kt&&((o=zt(e._stackHolder,2))&&-1===t.indexOf(o)&&t.push(o),e._prev&&Ln(e._prev,t,n)),t}function qn(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Me(){xe()&&Ee()}function xe(){var e=cn;return cn=!1,Ue=!1,e}function Ee(){var e,t,n;do{for(;_e.length>0;)for(e=_e,_e=[],n=e.length,t=0;t<n;++t){var o=e[t];o[0].apply(null,o[1])}}while(_e.length>0);cn=!0,Ue=!0}function yn(){var e=Yt;Yt=[],e.forEach(o=>{o._PSD.onunhandled.call(null,o._value,o)});for(var t=Ne.slice(0),n=t.length;n;)t[--n]()}function $e(e){return new C(d,!1,e)}function ot(e,t){var n=U;return function(){var o=xe(),s=U;try{return Lt(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{Lt(s,!1),o&&Ee()}}}lt(C.prototype,{then:fn,_then:function(e,t){pn(this,new Nn(null,null,e,t,U))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return this.then(null,"function"==typeof t?o=>o instanceof t?n(o):$e(o):o=>o&&o.name===t?n(o):$e(o))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),$e(t)))},stack:{get:function(){if(this._stack)return this._stack;try{H=!0;var e=Ln(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{H=!1}}},timeout:function(e,t){return e<1/0?new C((n,o)=>{var s=setTimeout(()=>o(new N.Timeout(t)),e);this.then(n,o).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&$(C.prototype,Symbol.toStringTag,"Dexie.Promise"),ie.env=Wn(),lt(C,{all:function(){var e=it.apply(null,arguments).map(We);return new C(function(t,n){0===e.length&&t([]);var o=e.length;e.forEach((s,u)=>C.resolve(s).then(c=>{e[u]=c,--o||t(e)},n))})},resolve:e=>{if(e instanceof C)return e;if(e&&"function"==typeof e.then)return new C((n,o)=>{e.then(n,o)});var t=new C(d,!0,e);return qn(t,ln),t},reject:$e,race:function(){var e=it.apply(null,arguments).map(We);return new C((t,n)=>{e.map(o=>C.resolve(o).then(t,n))})},PSD:{get:()=>U,set:e=>U=e},totalEchoes:{get:()=>qe},newPSD:$t,usePSD:se,scheduler:{get:()=>ve,set:e=>{ve=e}},rejectionMapper:{get:()=>hn,set:e=>{hn=e}},follow:(e,t)=>new C((n,o)=>$t((s,u)=>{var c=U;c.unhandleds=[],c.onunhandled=u,c.finalize=gt(function(){var f;f=()=>{0===this.unhandleds.length?s():u(this.unhandleds[0])},Ne.push(function h(){f(),Ne.splice(Ne.indexOf(h),1)}),++Ht,ve(()=>{0==--Ht&&yn()},[])},c.finalize),e()},t,n,o))}),Z&&(Z.allSettled&&$(C,"allSettled",function(){const e=it.apply(null,arguments).map(We);return new C(t=>{0===e.length&&t([]);let n=e.length;const o=new Array(n);e.forEach((s,u)=>C.resolve(s).then(c=>o[u]={status:"fulfilled",value:c},c=>o[u]={status:"rejected",reason:c}).then(()=>--n||t(o)))})}),Z.any&&typeof AggregateError<"u"&&$(C,"any",function(){const e=it.apply(null,arguments).map(We);return new C((t,n)=>{0===e.length&&n(new AggregateError([]));let o=e.length;const s=new Array(o);e.forEach((u,c)=>C.resolve(u).then(f=>t(f),f=>{s[c]=f,--o||n(new AggregateError(s))}))})}));const wt={awaits:0,echoes:0,id:0};var dr=0,Le=[],mn=0,qe=0,pr=0;function $t(e,t,n,o){var s=U,u=Object.create(s);u.parent=s,u.ref=0,u.global=!1,u.id=++pr;var c=ie.env;u.env=Q?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:Vn(c.nthen,u),gthen:Vn(c.gthen,u)}:{},t&&m(u,t),++s.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()};var f=se(u,e,n,o);return 0===u.ref&&u.finalize(),f}function oe(){return wt.id||(wt.id=++dr),++wt.awaits,wt.echoes+=100,wt.id}function Dt(){return!!wt.awaits&&(0==--wt.awaits&&(wt.id=0),wt.echoes=100*wt.awaits,!0)}function We(e){return wt.echoes&&e&&e.constructor===Z?(oe(),e.then(t=>(Dt(),t),t=>(Dt(),pt(t)))):e}function yr(e){++qe,wt.echoes&&0!=--wt.echoes||(wt.echoes=wt.id=0),Le.push(U),Lt(e,!0)}function mr(){var e=Le[Le.length-1];Le.pop(),Lt(e,!1)}function Lt(e,t){var n=U;if((t?!wt.echoes||mn++&&e===U:!mn||--mn&&e===U)||zn(t?yr.bind(null,e):mr),e!==U&&(U=e,n===ie&&(ie.env=Wn()),Q)){var o=ie.env.Promise,s=e.env;v.then=s.nthen,o.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(R,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function Wn(){var e=R.Promise;return Q?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(R,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:v.then,gthen:e.prototype.then}:{}}function se(e,t,n,o,s){var u=U;try{return Lt(e,!0),t(n,o,s)}finally{Lt(u,!1)}}function zn(e){nt.call(b,e)}function ze(e,t,n,o){return"function"!=typeof e?e:function(){var s=U;n&&oe(),Lt(t,!0);try{return e.apply(this,arguments)}finally{Lt(s,!1),o&&zn(Dt)}}}function Vn(e,t){return function(n,o){return e.call(this,ze(n,t),ze(o,t))}}function Gn(e,t){var n;try{n=t.onuncatched(e)}catch{}if(!1!==n)try{var o,s={promise:t,reason:e};if(R.document&&document.createEvent?((o=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),m(o,s)):R.CustomEvent&&m(o=new CustomEvent("unhandledrejection",{detail:s}),s),o&&R.dispatchEvent&&(dispatchEvent(o),!R.PromiseRejectionEvent&&R.onunhandledrejection))try{R.onunhandledrejection(o)}catch{}kt&&o&&!o.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}-1===(""+nt).indexOf("[native code]")&&(oe=Dt=z);var pt=C.reject;function gn(e,t,n,o){if(e.idbdb&&(e._state.openComplete||U.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(u){return u.name===Gt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>gn(e,t,n,o))):pt(u)}return s._promise(t,(u,c)=>$t(()=>(U.trans=s,o(u,c,s)))).then(u=>s._completion.then(()=>u))}if(e._state.openComplete)return pt(new N.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return pt(new N.DatabaseClosed);e.open().catch(z)}return e._state.dbReadyPromise.then(()=>gn(e,t,n,o))}const Zt=String.fromCharCode(65535),Kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Be=[],Ve=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),gr=Ve,wr=Ve,Yn=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function Xt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Hn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ge(e){return"string"!=typeof e||/\./.test(e)?t=>t:t=>(void 0===t[e]&&e in t&&delete(t=Nt(t))[e],t)}class br{_trans(t,n,o){const s=this._tx||U.trans,u=this.name;function c(h,g,y){if(!y.schema[u])throw new N.NotFound("Table "+u+" not part of transaction");return n(y.idbtrans,y)}const f=xe();try{return s&&s.db===this.db?s===U.trans?s._promise(t,c,o):$t(()=>s._promise(t,c,o),{trans:s,transless:U.transless||U}):gn(this.db,t,[this.name],c)}finally{f&&Ee()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",o=>this.core.get({trans:o,key:t}).then(s=>this.hook.reading.fire(s))).then(n)}where(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(j(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=K(t);if(1===n.length)return this.where(n[0]).equals(t[n[0]]);const o=this.schema.indexes.concat(this.schema.primKey).filter(g=>g.compound&&n.every(y=>g.keyPath.indexOf(y)>=0)&&g.keyPath.every(y=>n.indexOf(y)>=0))[0];if(o&&this.db._maxKey!==Zt)return this.where(o.name).equals(o.keyPath.map(g=>t[g]));!o&&kt&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,u=this.db._deps.indexedDB;function c(g,y){try{return 0===u.cmp(g,y)}catch{return!1}}const[f,h]=n.reduce(([g,y],w)=>{const p=s[w],_=t[w];return[g||p,g||!p?Xt(y,p&&p.multi?k=>{const B=Ft(k,w);return j(B)&&B.some(I=>c(_,I))}:k=>c(_,Ft(k,w))):y]},[null,null]);return f?this.where(f.name).equals(t[f.keyPath]).filter(h):o?this.filter(h):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,j(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=o=>{if(!o)return o;const s=Object.create(t.prototype);for(var u in o)if(W(o,u))try{s[u]=o[u]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){m(this,t)})}add(t,n){const{auto:o,keyPath:s}=this.schema.primKey;let u=t;return s&&o&&(u=Ge(s)(t)),this._trans("readwrite",c=>this.core.mutate({trans:c,type:"add",keys:null!=n?[n]:null,values:[u]})).then(c=>c.numFailures?C.reject(c.failures[0]):c.lastResult).then(c=>{if(s)try{Bt(t,s,c)}catch{}return c})}update(t,n){if("object"!=typeof t||j(t))return this.where(":id").equals(t).modify(n);{const o=Ft(t,this.schema.primKey.keyPath);if(void 0===o)return pt(new N.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof n?K(n).forEach(s=>{Bt(t,s,n[s])}):n(t,{value:t,primKey:o})}catch{}return this.where(":id").equals(o).modify(n)}}put(t,n){const{auto:o,keyPath:s}=this.schema.primKey;let u=t;return s&&o&&(u=Ge(s)(t)),this._trans("readwrite",c=>this.core.mutate({trans:c,type:"put",values:[u],keys:null!=n?[n]:null})).then(c=>c.numFailures?C.reject(c.failures[0]):c.lastResult).then(c=>{if(s)try{Bt(t,s,c)}catch{}return c})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?C.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:Hn})).then(t=>t.numFailures?C.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(o=>o.map(s=>this.hook.reading.fire(s))))}bulkAdd(t,n,o){const s=Array.isArray(n)?n:void 0,u=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",c=>{const{auto:f,keyPath:h}=this.schema.primKey;if(h&&s)throw new N.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");const g=t.length;let y=h&&f?t.map(Ge(h)):t;return this.core.mutate({trans:c,type:"add",keys:s,values:y,wantResults:u}).then(({numFailures:w,results:p,lastResult:_,failures:k})=>{if(0===w)return u?p:_;throw new Vt(`${this.name}.bulkAdd(): ${w} of ${g} operations failed`,k)})})}bulkPut(t,n,o){const s=Array.isArray(n)?n:void 0,u=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",c=>{const{auto:f,keyPath:h}=this.schema.primKey;if(h&&s)throw new N.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");const g=t.length;let y=h&&f?t.map(Ge(h)):t;return this.core.mutate({trans:c,type:"put",keys:s,values:y,wantResults:u}).then(({numFailures:w,results:p,lastResult:_,failures:k})=>{if(0===w)return u?p:_;throw new Vt(`${this.name}.bulkPut(): ${w} of ${g} operations failed`,k)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",o=>this.core.mutate({trans:o,type:"delete",keys:t})).then(({numFailures:o,lastResult:s,failures:u})=>{if(0===o)return s;throw new Vt(`${this.name}.bulkDelete(): ${o} of ${n} operations failed`,u)})}}function ke(e){var t={},n=function(f,h){if(h){for(var g=arguments.length,y=new Array(g-1);--g;)y[g-1]=arguments[g];return t[f].subscribe.apply(null,y),e}if("string"==typeof f)return t[f]};n.addEventType=u;for(var o=1,s=arguments.length;o<s;++o)u(arguments[o]);return n;function u(f,h,g){if("object"==typeof f)return function c(f){K(f).forEach(function(h){var g=f[h];if(j(g))u(h,f[h][0],f[h][1]);else{if("asap"!==g)throw new N.InvalidArgument("Invalid event config");var y=u(h,Ot,function(){for(var w=arguments.length,p=new Array(w);w--;)p[w]=arguments[w];y.subscribers.forEach(function(_){Pt(function(){_.apply(null,p)})})})}})}(f);h||(h=i),g||(g=z);var y={subscribers:[],fire:g,subscribe:function(w){-1===y.subscribers.indexOf(w)&&(y.subscribers.push(w),y.fire=h(y.fire,w))},unsubscribe:function(w){y.subscribers=y.subscribers.filter(function(p){return p!==w}),y.fire=y.subscribers.reduce(h,g)}};return t[f]=n[f]=y,y}}function Ie(e,t){return Y(t).from({prototype:e}),t}function ae(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wn(e,t){e.filter=Xt(e.filter,t)}function bn(e,t,n){var o=e.replayFilter;e.replayFilter=o?()=>Xt(o(),t()):t,e.justLimit=n&&!o}function Ye(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new N.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Zn(e,t,n){const o=Ye(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:o,range:e.range}})}function He(e,t,n,o){const s=e.replayFilter?Xt(e.filter,e.replayFilter()):e.filter;if(e.or){const u={},c=(f,h,g)=>{if(!s||s(h,g,p=>h.stop(p),p=>h.fail(p))){var y=h.primaryKey,w=""+y;"[object ArrayBuffer]"===w&&(w=""+new Uint8Array(y)),W(u,w)||(u[w]=!0,t(f,h,g))}};return Promise.all([e.or._iterate(c,n),Xn(Zn(e,o,n),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}return Xn(Zn(e,o,n),Xt(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Xn(e,t,n,o){var s=ot(o?(u,c,f)=>n(o(u),c,f):n);return e.then(u=>{if(u)return u.start(()=>{var c=()=>u.continue();t&&!t(u,f=>c=f,f=>{u.stop(f),c=z},f=>{u.fail(f),c=z})||s(u.value,u,f=>c=f),c()})})}function vt(e,t){try{const n=Jn(e),o=Jn(t);if(n!==o)return"Array"===n?1:"Array"===o?-1:"binary"===n?1:"binary"===o?-1:"string"===n?1:"string"===o?-1:"Date"===n?1:"Date"!==o?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(s,u){const c=s.length,f=u.length,h=c<f?c:f;for(let g=0;g<h;++g)if(s[g]!==u[g])return s[g]<u[g]?-1:1;return c===f?0:c<f?-1:1}(Qn(e),Qn(t));case"Array":return function(s,u){const c=s.length,f=u.length,h=c<f?c:f;for(let g=0;g<h;++g){const y=vt(s[g],u[g]);if(0!==y)return y}return c===f?0:c<f?-1:1}(e,t)}}catch{}return NaN}function Jn(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=de(e);return"ArrayBuffer"===n?"binary":n}function Qn(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class vr{_read(t,n){var o=this._ctx;return o.error?o.table._trans(null,pt.bind(null,o.error)):o.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,pt.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=Xt(n.algorithm,t)}_iterate(t,n){return He(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&m(o,t),n._ctx=o,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(o=>He(n,t,o,n.table.core))}count(t){return this._read(n=>{const o=this._ctx,s=o.table.core;if(ae(o,!0))return s.count({trans:n,query:{index:Ye(o,s.schema),range:o.range}}).then(c=>Math.min(c,o.limit));var u=0;return He(o,()=>(++u,!1),n,s).then(()=>u)}).then(t)}sortBy(t,n){const o=t.split(".").reverse(),s=o[0],u=o.length-1;function c(g,y){return y?c(g[o[y]],y-1):g[s]}var f="next"===this._ctx.dir?1:-1;function h(g,y){var w=c(g,u),p=c(y,u);return w<p?-f:w>p?f:0}return this.toArray(function(g){return g.sort(h)}).then(n)}toArray(t){return this._read(n=>{var o=this._ctx;if("next"===o.dir&&ae(o,!0)&&o.limit>0){const{valueMapper:s}=o,u=Ye(o,o.table.core.schema);return o.table.core.query({trans:n,limit:o.limit,values:!0,query:{index:u,range:o.range}}).then(({result:c})=>s?c.map(s):c)}{const s=[];return He(o,u=>s.push(u),n,o.table.core).then(()=>s)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ae(n)?bn(n,()=>{var o=t;return(s,u)=>0===o||(1===o?(--o,!1):(u(()=>{s.advance(o),o=0}),!1))}):bn(n,()=>{var o=t;return()=>--o<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),bn(this._ctx,()=>{var n=t;return function(o,s,u){return--n<=0&&s(u),n>=0}},!0),this}until(t,n){return wn(this._ctx,function(o,s,u){return!t(o.value)||(s(u),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n;return wn(this._ctx,function(s){return t(s.value)}),(n=this._ctx).isMatch=Xt(n.isMatch,t),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){t(s.key,s)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){t(s.primaryKey,s)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,u){o.push(u.key)}).then(function(){return o}).then(t)}primaryKeys(t){var n=this._ctx;if("next"===n.dir&&ae(n,!0)&&n.limit>0)return this._read(s=>{var u=Ye(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:u,range:n.range}})}).then(({result:s})=>s).then(t);n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,u){o.push(u.primaryKey)}).then(function(){return o}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var o={};return wn(this._ctx,function(s){var u=s.primaryKey.toString(),c=W(o,u);return o[u]=!0,!c}),this}modify(t){var n=this._ctx;return this._write(o=>{var s;if("function"==typeof t)s=t;else{var u=K(t),c=u.length;s=function(B){for(var I=!1,E=0;E<c;++E){var x=u[E],F=t[x];Ft(B,x)!==F&&(Bt(B,x,F),I=!0)}return I}}const f=n.table.core,{outbound:h,extractKey:g}=f.schema.primaryKey,y=this.db._options.modifyChunkSize||200,w=[];let p=0;const _=[],k=(B,I)=>{const{failures:E,numFailures:x}=I;p+=B-x;for(let F of K(E))w.push(E[F])};return this.clone().primaryKeys().then(B=>{const I=E=>{const x=Math.min(y,B.length-E);return f.getMany({trans:o,keys:B.slice(E,E+x),cache:"immutable"}).then(F=>{const O=[],P=[],A=h?[]:null,S=[];for(let T=0;T<x;++T){const tt=F[T],at={value:Nt(tt),primKey:B[E+T]};!1!==s.call(at,at.value,at)&&(null==at.value?S.push(B[E+T]):h||0===vt(g(tt),g(at.value))?(P.push(at.value),h&&A.push(B[E+T])):(S.push(B[E+T]),O.push(at.value)))}const L=ae(n)&&n.limit===1/0&&("function"!=typeof t||t===vn)&&{index:n.index,range:n.range};return Promise.resolve(O.length>0&&f.mutate({trans:o,type:"add",values:O}).then(T=>{for(let tt in T.failures)S.splice(parseInt(tt),1);k(O.length,T)})).then(()=>(P.length>0||L&&"object"==typeof t)&&f.mutate({trans:o,type:"put",keys:A,values:P,criteria:L,changeSpec:"function"!=typeof t&&t}).then(T=>k(P.length,T))).then(()=>(S.length>0||L&&t===vn)&&f.mutate({trans:o,type:"delete",keys:S,criteria:L}).then(T=>k(S.length,T))).then(()=>B.length>E+x&&I(E+y))})};return I(0).then(()=>{if(w.length>0)throw new re("Error modifying one or more objects",w,p,_);return B.length})})})}delete(){var t=this._ctx,n=t.range;return ae(t)&&(t.isPrimKey&&!wr||3===n.type)?this._write(o=>{const{primaryKey:s}=t.table.core.schema,u=n;return t.table.core.count({trans:o,query:{index:s,range:u}}).then(c=>t.table.core.mutate({trans:o,type:"deleteRange",range:u}).then(({failures:f,numFailures:y})=>{if(y)throw new re("Could not delete some values",Object.keys(f).map(w=>f[w]),c-y);return c-y}))}):this.modify(vn)}}const vn=(e,t)=>t.value=null;function _r(e,t){return e<t?-1:e===t?0:1}function xr(e,t){return e>t?-1:e===t?0:1}function At(e,t,n){var o=e instanceof er?new e.Collection(e):e;return o._ctx.error=n?new n(t):new TypeError(t),o}function ue(e){return new e.Collection(e,()=>tr("")).limit(0)}function Er(e,t,n,o,s,u){for(var c=Math.min(e.length,o.length),f=-1,h=0;h<c;++h){var g=t[h];if(g!==o[h])return s(e[h],n[h])<0?e.substr(0,h)+n[h]+n.substr(h+1):s(e[h],o[h])<0?e.substr(0,h)+o[h]+n.substr(h+1):f>=0?e.substr(0,f)+t[f]+n.substr(f+1):null;s(e[h],g)<0&&(f=h)}return c<o.length&&"next"===u?e+n.substr(e.length):c<e.length&&"prev"===u?e.substr(0,n.length):f<0?null:e.substr(0,f)+o[f]+n.substr(f+1)}function Ze(e,t,n,o){var s,u,c,f,h,g,y,w=n.length;if(!n.every(B=>"string"==typeof B))return At(e,"String expected.");function p(B){s="next"===B?x=>x.toUpperCase():x=>x.toLowerCase(),u="next"===B?x=>x.toLowerCase():x=>x.toUpperCase(),c="next"===B?_r:xr;var I=n.map(function(E){return{lower:u(E),upper:s(E)}}).sort(function(E,x){return c(E.lower,x.lower)});f=I.map(function(E){return E.upper}),h=I.map(function(E){return E.lower}),g=B,y="next"===B?"":o}p("next");var _=new e.Collection(e,()=>qt(f[0],h[w-1]+o));_._ondirectionchange=function(B){p(B)};var k=0;return _._addAlgorithm(function(B,I,E){var x=B.key;if("string"!=typeof x)return!1;var F=u(x);if(t(F,h,k))return!0;for(var O=null,P=k;P<w;++P){var A=Er(x,F,f[P],h[P],c,g);null===A&&null===O?k=P+1:(null===O||c(O,A)>0)&&(O=A)}return I(null!==O?function(){B.continue(O+y)}:E),!1}),_}function qt(e,t,n,o){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:o}}function tr(e){return{type:1,lower:e,upper:e}}class er{get Collection(){return this._ctx.table.db.Collection}between(t,n,o,s){o=!1!==o,s=!0===s;try{return this._cmp(t,n)>0||0===this._cmp(t,n)&&(o||s)&&(!o||!s)?ue(this):new this.Collection(this,()=>qt(t,n,!o,!s))}catch{return At(this,Kt)}}equals(t){return null==t?At(this,Kt):new this.Collection(this,()=>tr(t))}above(t){return null==t?At(this,Kt):new this.Collection(this,()=>qt(t,void 0,!0))}aboveOrEqual(t){return null==t?At(this,Kt):new this.Collection(this,()=>qt(t,void 0,!1))}below(t){return null==t?At(this,Kt):new this.Collection(this,()=>qt(void 0,t,!1,!0))}belowOrEqual(t){return null==t?At(this,Kt):new this.Collection(this,()=>qt(void 0,t))}startsWith(t){return"string"!=typeof t?At(this,"String expected."):this.between(t,t+Zt,!0,!0)}startsWithIgnoreCase(t){return""===t?this.startsWith(t):Ze(this,(n,o)=>0===n.indexOf(o[0]),[t],Zt)}equalsIgnoreCase(t){return Ze(this,(n,o)=>n===o[0],[t],"")}anyOfIgnoreCase(){var t=it.apply(et,arguments);return 0===t.length?ue(this):Ze(this,(n,o)=>-1!==o.indexOf(n),t,"")}startsWithAnyOfIgnoreCase(){var t=it.apply(et,arguments);return 0===t.length?ue(this):Ze(this,(n,o)=>o.some(s=>0===n.indexOf(s)),t,Zt)}anyOf(){const t=it.apply(et,arguments);let n=this._cmp;try{t.sort(n)}catch{return At(this,Kt)}if(0===t.length)return ue(this);const o=new this.Collection(this,()=>qt(t[0],t[t.length-1]));o._ondirectionchange=u=>{n="next"===u?this._ascending:this._descending,t.sort(n)};let s=0;return o._addAlgorithm((u,c,f)=>{const h=u.key;for(;n(h,t[s])>0;)if(++s,s===t.length)return c(f),!1;return 0===n(h,t[s])||(c(()=>{u.continue(t[s])}),!1)}),o}notEqual(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=it.apply(et,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch{return At(this,Kt)}const n=t.reduce((o,s)=>o?o.concat([[o[o.length-1][1],s]]):[[-1/0,s]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const o=this._cmp,s=this._ascending,u=this._descending,c=this._min,f=this._max;if(0===t.length)return ue(this);if(!t.every(x=>void 0!==x[0]&&void 0!==x[1]&&s(x[0],x[1])<=0))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",N.InvalidArgument);const h=!n||!1!==n.includeLowers,g=n&&!0===n.includeUppers;let y,w=s;function p(x,F){return w(x[0],F[0])}try{y=t.reduce(function(x,F){let O=0,P=x.length;for(;O<P;++O){const A=x[O];if(o(F[0],A[1])<0&&o(F[1],A[0])>0){A[0]=c(A[0],F[0]),A[1]=f(A[1],F[1]);break}}return O===P&&x.push(F),x},[]),y.sort(p)}catch{return At(this,Kt)}let _=0;const k=g?x=>s(x,y[_][1])>0:x=>s(x,y[_][1])>=0,B=h?x=>u(x,y[_][0])>0:x=>u(x,y[_][0])>=0;let I=k;const E=new this.Collection(this,()=>qt(y[0][0],y[y.length-1][1],!h,!g));return E._ondirectionchange=x=>{"next"===x?(I=k,w=s):(I=B,w=u),y.sort(p)},E._addAlgorithm((x,F,O)=>{for(var P=x.key;I(P);)if(++_,_===y.length)return F(O),!1;return!((k(A=P)||B(A))&&(0===this._cmp(P,y[_][1])||0===this._cmp(P,y[_][0])||F(()=>{x.continue(w===s?y[_][0]:y[_][1])}),1));var A}),E}startsWithAnyOf(){const t=it.apply(et,arguments);return t.every(n=>"string"==typeof n)?0===t.length?ue(this):this.inAnyRange(t.map(n=>[n,n+Zt])):At(this,"startsWithAnyOf() only works with strings")}}function Rt(e){return ot(function(t){return Ae(t),e(t.target.error),!1})}function Ae(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Wt=ke(null,"storagemutated");class Br{_lock(){return ft(!U.global),++this._reculock,1!==this._reculock||U.global||(U.lockOwnerFor=this),this}_unlock(){if(ft(!U.global),0==--this._reculock)for(U.global||(U.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{se(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&U.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,o=this.db._state.dbOpenError;if(ft(!this.idbtrans),!t&&!n)switch(o&&o.name){case"DatabaseClosedError":throw new N.DatabaseClosed(o);case"MissingAPIError":throw new N.MissingAPI(o.message,o);default:throw new N.OpenFailed(o)}if(!this.active)throw new N.TransactionInactive;return ft(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ot(s=>{Ae(s),this._reject(t.error)}),t.onabort=ot(s=>{Ae(s),this.active&&this._reject(new N.Abort(t.error)),this.active=!1,this.on("abort").fire(s)}),t.oncomplete=ot(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Wt.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,o){if("readwrite"===t&&"readwrite"!==this.mode)return pt(new N.ReadOnly("Transaction is readonly"));if(!this.active)return pt(new N.TransactionInactive);if(this._locked())return new C((u,c)=>{this._blockedFuncs.push([()=>{this._promise(t,n,o).then(u,c)},U])});if(o)return $t(()=>{var u=new C((c,f)=>{this._lock();const h=n(c,f,this);h&&h.then&&h.then(c,f)});return u.finally(()=>this._unlock()),u._lib=!0,u});var s=new C((u,c)=>{var f=n(u,c,this);f&&f.then&&f.then(u,c)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const o=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>o);else{n._waitingFor=o,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);!function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=c)}()}var u=n._waitingFor;return new C((c,f)=>{o.then(h=>n._waitingQueue.push(ot(c.bind(null,h))),h=>n._waitingQueue.push(ot(f.bind(null,h)))).finally(()=>{n._waitingFor===u&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new N.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(W(n,t))return n[t];const o=this.schema[t];if(!o)throw new N.NotFound("Table "+t+" not part of transaction");const s=new this.db.Table(t,o,this);return s.core=this.db.core.table(t),n[t]=s,s}}function _n(e,t,n,o,s,u,c){return{name:e,keyPath:t,unique:n,multi:o,auto:s,compound:u,src:(n&&!c?"&":"")+(o?"*":"")+(s?"++":"")+nr(t)}}function nr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function rr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:he(n,o=>[o.name,o])}}let Fe=e=>{try{return e.only([[]]),Fe=()=>[[]],[[]]}catch{return Fe=()=>Zt,Zt}};function xn(e){return null==e?()=>{}:"string"==typeof e?1===(t=e).split(".").length?n=>n[t]:n=>Ft(n,t):t=>Ft(t,e);var t}function ir(e){return[].slice.call(e)}let kr=0;function Se(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function Ir(e,t,n){function o(h){if(3===h.type)return null;if(4===h.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:g,upper:y,lowerOpen:w,upperOpen:p}=h;return void 0===g?void 0===y?null:t.upperBound(y,!!p):void 0===y?t.lowerBound(g,!!w):t.bound(g,y,!!w,!!p)}const{schema:s,hasGetAll:u}=function(h,g){const y=ir(h.objectStoreNames);return{schema:{name:h.name,tables:y.map(w=>g.objectStore(w)).map(w=>{const{keyPath:p,autoIncrement:_}=w,k=j(p),I={},E={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==p,compound:k,keyPath:p,autoIncrement:_,unique:!0,extractKey:xn(p)},indexes:ir(w.indexNames).map(x=>w.index(x)).map(x=>{const{name:F,unique:O,multiEntry:P,keyPath:A}=x,S={name:F,compound:j(A),keyPath:A,unique:O,multiEntry:P,extractKey:xn(A)};return I[Se(A)]=S,S}),getIndexByKeyPath:x=>I[Se(x)]};return I[":id"]=E.primaryKey,null!=p&&(I[Se(p)]=E.primaryKey),E})},hasGetAll:y.length>0&&"getAll"in g.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),c=s.tables.map(h=>function(g){const y=g.name;return{name:y,schema:g,mutate:function({trans:w,type:p,keys:_,values:k,range:B}){return new Promise((I,E)=>{I=ot(I);const x=w.objectStore(y),F=null==x.keyPath,O="put"===p||"add"===p;if(!O&&"delete"!==p&&"deleteRange"!==p)throw new Error("Invalid operation type: "+p);const{length:P}=_||k||{length:1};if(_&&k&&_.length!==k.length)throw new Error("Given keys array must have same length as given values array.");if(0===P)return I({numFailures:0,failures:{},results:[],lastResult:void 0});let A;const S=[],L=[];let T=0;const tt=_t=>{++T,Ae(_t)};if("deleteRange"===p){if(4===B.type)return I({numFailures:T,failures:L,results:[],lastResult:void 0});S.push(A=3===B.type?x.clear():x.delete(o(B)))}else{const[_t,bt]=O?F?[k,_]:[k,null]:[_,null];if(O)for(let ut=0;ut<P;++ut)S.push(A=bt&&void 0!==bt[ut]?x[p](_t[ut],bt[ut]):x[p](_t[ut])),A.onerror=tt;else for(let ut=0;ut<P;++ut)S.push(A=x[p](_t[ut])),A.onerror=tt}const at=_t=>{const bt=_t.target.result;S.forEach((ut,ce)=>null!=ut.error&&(L[ce]=ut.error)),I({numFailures:T,failures:L,results:"delete"===p?_:S.map(ut=>ut.result),lastResult:bt})};A.onerror=_t=>{tt(_t),at(_t)},A.onsuccess=at})},getMany:({trans:w,keys:p})=>new Promise((_,k)=>{_=ot(_);const B=w.objectStore(y),I=p.length,E=new Array(I);let x,F=0,O=0;const P=S=>{const L=S.target;E[L._pos]=L.result,++O===F&&_(E)},A=Rt(k);for(let S=0;S<I;++S)null!=p[S]&&(x=B.get(p[S]),x._pos=S,x.onsuccess=P,x.onerror=A,++F);0===F&&_(E)}),get:({trans:w,key:p})=>new Promise((_,k)=>{_=ot(_);const B=w.objectStore(y).get(p);B.onsuccess=I=>_(I.target.result),B.onerror=Rt(k)}),query:(w=u,p=>new Promise((_,k)=>{_=ot(_);const{trans:B,values:I,limit:E,query:x}=p,F=E===1/0?void 0:E,{index:O,range:P}=x,A=B.objectStore(y),S=O.isPrimaryKey?A:A.index(O.name),L=o(P);if(0===E)return _({result:[]});if(w){const T=I?S.getAll(L,F):S.getAllKeys(L,F);T.onsuccess=tt=>_({result:tt.target.result}),T.onerror=Rt(k)}else{let T=0;const tt=I||!("openKeyCursor"in S)?S.openCursor(L):S.openKeyCursor(L),at=[];tt.onsuccess=_t=>{const bt=tt.result;return bt?(at.push(I?bt.value:bt.primaryKey),++T===E?_({result:at}):void bt.continue()):_({result:at})},tt.onerror=Rt(k)}})),openCursor:function({trans:w,values:p,query:_,reverse:k,unique:B}){return new Promise((I,E)=>{I=ot(I);const{index:x,range:F}=_,O=w.objectStore(y),P=x.isPrimaryKey?O:O.index(x.name),A=k?B?"prevunique":"prev":B?"nextunique":"next",S=p||!("openKeyCursor"in P)?P.openCursor(o(F),A):P.openKeyCursor(o(F),A);S.onerror=Rt(E),S.onsuccess=ot(L=>{const T=S.result;if(!T)return void I(null);T.___id=++kr,T.done=!1;const tt=T.continue.bind(T);let at=T.continuePrimaryKey;at&&(at=at.bind(T));const _t=T.advance.bind(T),bt=()=>{throw new Error("Cursor not stopped")};T.trans=w,T.stop=T.continue=T.continuePrimaryKey=T.advance=()=>{throw new Error("Cursor not started")},T.fail=ot(E),T.next=function(){let ut=1;return this.start(()=>ut--?this.continue():this.stop()).then(()=>this)},T.start=ut=>{const ce=new Promise((Et,te)=>{Et=ot(Et),S.onerror=Rt(te),T.fail=te,T.stop=Pe=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=bt,Et(Pe)}}),le=()=>{if(S.result)try{ut()}catch(Et){T.fail(Et)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return S.onsuccess=ot(Et=>{S.onsuccess=le,le()}),T.continue=tt,T.continuePrimaryKey=at,T.advance=_t,le(),ce},I(T)},E)})},count({query:w,trans:p}){const{index:_,range:k}=w;return new Promise((B,I)=>{const E=p.objectStore(y),x=_.isPrimaryKey?E:E.index(_.name),F=o(k),O=F?x.count(F):x.count();O.onsuccess=ot(P=>B(P.target.result)),O.onerror=Rt(I)})}};var w}(h)),f={};return c.forEach(h=>f[h.name]=h),{stack:"dbcore",transaction:e.transaction.bind(e),table(h){if(!f[h])throw new Error(`Table '${h}' not found`);return f[h]},MIN_KEY:-1/0,MAX_KEY:Fe(t),schema:s}}function En({_novip:e},t){const o=function(s,u,{IDBKeyRange:c},h){return{dbcore:(y=Ir(u,c,h),w=s.dbcore,w.reduce((p,{create:_})=>({...p,..._(p)}),y))};var y,w}(e._middlewares,t.db,e._deps,t);e.core=o.dbcore,e.tables.forEach(s=>{const u=s.name;e.core.schema.tables.some(c=>c.name===u)&&(s.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=s.core))})}function Xe({_novip:e},t,n,o){n.forEach(s=>{const u=o[s];t.forEach(c=>{const f=mt(c,s);(!f||"value"in f&&void 0===f.value)&&(c===e.Transaction.prototype||c instanceof e.Transaction?$(c,s,{get(){return this.table(s)},set(h){M(this,s,{value:h,writable:!0,configurable:!0,enumerable:!0})}}):c[s]=new e.Table(s,u))})})}function Bn({_novip:e},t){t.forEach(n=>{for(let o in n)n[o]instanceof e.Table&&delete n[o]})}function Ar(e,t){return e._cfg.version-t._cfg.version}function or(e,t){const n={del:[],add:[],change:[]};let o;for(o in e)t[o]||n.del.push(o);for(o in t){const s=e[o],u=t[o];if(s){const c={name:o,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||s.primKey.auto!==u.primKey.auto&&!Ve)c.recreate=!0,n.change.push(c);else{const f=s.idxByName,h=u.idxByName;let g;for(g in f)h[g]||c.del.push(g);for(g in h){const y=f[g],w=h[g];y?y.src!==w.src&&c.change.push(w):c.add.push(w)}(c.del.length>0||c.add.length>0||c.change.length>0)&&n.change.push(c)}}else n.add.push([o,u])}return n}function kn(e,t,n,o){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return o.forEach(u=>In(s,u)),s}function In(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function An(e,t,n){const o={};return dt(t.objectStoreNames,0).forEach(s=>{const u=n.objectStore(s);let c=u.keyPath;const f=_n(nr(c),c||"",!1,!1,!!u.autoIncrement,c&&"string"!=typeof c,!0),h=[];for(let y=0;y<u.indexNames.length;++y){const w=u.index(u.indexNames[y]);c=w.keyPath;var g=_n(w.name,c,!!w.unique,!!w.multiEntry,!1,c&&"string"!=typeof c,!1);h.push(g)}o[s]=rr(s,f,h)}),o}function Fn({_novip:e},t,n){const o=n.db.objectStoreNames;for(let s=0;s<o.length;++s){const u=o[s],c=n.objectStore(u);e._hasGetAll="getAll"in c;for(let f=0;f<c.indexNames.length;++f){const h=c.indexNames[f],g=c.index(h).keyPath,y="string"==typeof g?g:"["+dt(g).join("+")+"]";if(t[u]){const w=t[u].idxByName[y];w&&(w.name=h,delete t[u].idxByName[y],t[u].idxByName[h]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&R.WorkerGlobalScope&&R instanceof R.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Sr{_parseStoresSpec(t,n){K(t).forEach(o=>{if(null!==t[o]){var s=t[o].split(",").map((c,f)=>{const h=(c=c.trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return _n(h,g||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),j(g),0===f)}),u=s.shift();if(u.multi)throw new N.Schema("Primary key cannot be multi-valued");s.forEach(c=>{if(c.auto)throw new N.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new N.Schema("Index must have a name and cannot be an empty string")}),n[o]=rr(o,u,s)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,t):t;const s={};let u={};return n._versions.forEach(c=>{m(s,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(s,u)}),n._dbSchema=u,Bn(n,[n._allTables,n,n.Transaction.prototype]),Xe(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],K(u),u),n._storeNames=K(u),this}upgrade(t){return this._cfg.contentUpgrade=l(this._cfg.contentUpgrade||z,t),this}}function Sn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Jt("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Cn(e){return e&&"function"==typeof e.databases}function Pn(e){return $t(function(){return U.letThrough=!0,e()})}function Cr(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Rn(e){var t=u=>e.next(u),n=s(t),o=s(u=>e.throw(u));function s(u){return c=>{var f=u(c),h=f.value;return f.done?h:h&&"function"==typeof h.then?h.then(n,o):j(h)?Promise.all(h).then(n,o):n(h)}}return s(t)()}function Rr(e,t,n){var o=arguments.length;if(o<2)throw new N.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];return n=s.pop(),[e,Te(s),n]}function sr(e,t,n,o,s){return C.resolve().then(()=>{const u=U.transless||U,c=e._createTransaction(t,n,e._dbSchema,o),f={trans:c,transless:u};if(o)c.idbtrans=o.idbtrans;else try{c.create(),e._state.PR1398_maxLoop=3}catch(w){return w.name===Gt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>sr(e,t,n,null,s))):pt(w)}const h=ne(s);let g;h&&oe();const y=C.follow(()=>{if(g=s.call(c,c),g)if(h){var w=Dt.bind(null,null);g.then(w,w)}else"function"==typeof g.next&&"function"==typeof g.throw&&(g=Rn(g))},f);return(g&&"function"==typeof g.then?C.resolve(g).then(w=>c.active?w:pt(new N.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):y.then(()=>g)).then(w=>(o&&c._resolve(),c._completion.then(()=>w))).catch(w=>(c._reject(w),pt(w)))})}function Je(e,t,n){const o=j(e)?e.slice():[e];for(let s=0;s<n;++s)o.push(t);return o}const Tr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:o}=n,s={},u=[];function c(y,w,p){const _=Se(y),k=s[_]=s[_]||[],B=null==y?0:"string"==typeof y?1:y.length,I=w>0,E={...p,isVirtual:I,keyTail:w,keyLength:B,extractKey:xn(y),unique:!I&&p.unique};return k.push(E),E.isPrimaryKey||u.push(E),B>1&&c(2===B?y[0]:y.slice(0,B-1),w+1,p),k.sort((x,F)=>x.keyTail-F.keyTail),E}const f=c(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[f];for(const y of o.indexes)c(y.keyPath,0,y);function h(y){const w=y.query.index;return w.isVirtual?{...y,query:{index:w,range:(p=y.query.range,_=w.keyTail,{type:1===p.type?2:p.type,lower:Je(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:Je(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0})}}:y;var p,_}return{...n,schema:{...o,primaryKey:f,indexes:u,getIndexByKeyPath:function(y){const w=s[Se(y)];return w&&w[0]}},count:y=>n.count(h(y)),query:y=>n.query(h(y)),openCursor(y){const{keyTail:w,isVirtual:p,keyLength:_}=y.query.index;return p?n.openCursor(h(y)).then(k=>{return k&&(B=k,Object.create(B,{continue:{value:function(E){null!=E?B.continue(Je(E,y.reverse?e.MAX_KEY:e.MIN_KEY,w)):y.unique?B.continue(B.key.slice(0,_).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,w)):B.continue()}},continuePrimaryKey:{value(E,x){B.continuePrimaryKey(Je(E,e.MAX_KEY,w),x)}},primaryKey:{get:()=>B.primaryKey},key:{get(){const E=B.key;return 1===_?E[0]:E.slice(0,_)}},value:{get:()=>B.value}}));var B}):n.openCursor(y)}}}}}};function Tn(e,t,n,o){return n=n||{},o=o||"",K(e).forEach(s=>{if(W(t,s)){var u=e[s],c=t[s];if("object"==typeof u&&"object"==typeof c&&u&&c){const f=de(u);f!==de(c)?n[o+s]=t[s]:"Object"===f?Tn(u,c,n,o+s+"."):u!==c&&(n[o+s]=t[s])}else u!==c&&(n[o+s]=t[s])}else n[o+s]=void 0}),K(t).forEach(s=>{W(e,s)||(n[o+s]=t[s])}),n}const Or={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:o}=n.schema;return{...n,mutate(u){const c=U.trans,{deleting:f,creating:h,updating:g}=c.table(t).hook;switch(u.type){case"add":if(h.fire===z)break;return c._promise("readwrite",()=>y(u),!0);case"put":if(h.fire===z&&g.fire===z)break;return c._promise("readwrite",()=>y(u),!0);case"delete":if(f.fire===z)break;return c._promise("readwrite",()=>y(u),!0);case"deleteRange":if(f.fire===z)break;return c._promise("readwrite",()=>{return w((p=u).trans,p.range,1e4);var p},!0)}return n.mutate(u);function y(p){const _=U.trans,k=p.keys||("delete"===(I=p).type?I.keys:I.keys||I.values.map(o.extractKey));var I;if(!k)throw new Error("Keys missing");return"delete"!==(p="add"===p.type||"put"===p.type?{...p,keys:k}:{...p}).type&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(B,I,E){return"add"===I.type?Promise.resolve([]):B.getMany({trans:I.trans,keys:E,cache:"immutable"})}(n,p,k).then(B=>{const I=k.map((E,x)=>{const F=B[x],O={onerror:null,onsuccess:null};if("delete"===p.type)f.fire.call(O,E,F,_);else if("add"===p.type||void 0===F){const P=h.fire.call(O,E,p.values[x],_);null==E&&null!=P&&(p.keys[x]=E=P,o.outbound||Bt(p.values[x],o.keyPath,E))}else{const P=Tn(F,p.values[x]),A=g.fire.call(O,P,E,F,_);if(A){const S=p.values[x];Object.keys(A).forEach(L=>{W(S,L)?S[L]=A[L]:Bt(S,L,A[L])})}}return O});return n.mutate(p).then(({failures:E,results:x,numFailures:F,lastResult:O})=>{for(let P=0;P<k.length;++P){const A=x?x[P]:k[P],S=I[P];null==A?S.onerror&&S.onerror(E[P]):S.onsuccess&&S.onsuccess("put"===p.type&&B[P]?p.values[P]:A)}return{failures:E,results:x,numFailures:F,lastResult:O}}).catch(E=>(I.forEach(x=>x.onerror&&x.onerror(E)),Promise.reject(E)))})}function w(p,_,k){return n.query({trans:p,values:!1,query:{index:o,range:_},limit:k}).then(({result:B})=>y({type:"delete",keys:B,trans:p}).then(I=>I.numFailures>0?Promise.reject(I.failures[0]):B.length<k?{failures:[],numFailures:0,lastResult:void 0}:w(p,{..._,lower:B[B.length-1],lowerOpen:!0},k)))}}}}})};function ar(e,t,n){try{if(!t||t.keys.length<e.length)return null;const o=[];for(let s=0,u=0;s<t.keys.length&&u<e.length;++s)0===vt(t.keys[s],e[u])&&(o.push(n?Nt(t.values[s]):t.values[s]),++u);return o.length===e.length?o:null}catch{return null}}const Dr={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:o=>{if(!o.cache)return n.getMany(o);const s=ar(o.keys,o.trans._cache,"clone"===o.cache);return s?C.resolve(s):n.getMany(o).then(u=>(o.trans._cache={keys:o.keys,values:"clone"===o.cache?Nt(u):u},u))},mutate:o=>("add"!==o.type&&(o.trans._cache=null),n.mutate(o))}}})};function On(e){return!("from"in e)}const Ut=function(e,t){if(!this){const n=new Ut;return e&&"d"in e&&m(n,e),n}m(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Ce(e,t,n){const o=vt(t,n);if(isNaN(o))return;if(o>0)throw RangeError();if(On(e))return m(e,{from:t,to:n,d:1});const s=e.l,u=e.r;if(vt(n,e.from)<0)return s?Ce(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ur(e);if(vt(t,e.to)>0)return u?Ce(u,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ur(e);vt(t,e.from)<0&&(e.from=t,e.l=null,e.d=u?u.d+1:1),vt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const c=!e.r;s&&!e.l&&Qe(e,s),u&&c&&Qe(e,u)}function Qe(e,t){On(t)||function n(o,{from:s,to:u,l:c,r:f}){Ce(o,s,u),c&&n(o,c),f&&n(o,f)}(e,t)}function Dn(e){let t=On(e)?null:{s:0,n:e};return{next(n){const o=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&vt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||vt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ur(e){var t,n;const o=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=o>1?"r":o<-1?"l":"";if(s){const u="r"===s?"l":"r",c={...e},f=e[s];e.from=f.from,e.to=f.to,e[s]=f[s],c[s]=f[u],e[u]=c,c.d=cr(c)}e.d=cr(e)}function cr({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}lt(Ut.prototype,{add(e){return Qe(this,e),this},addKey(e){return Ce(this,e,e),this},addKeys(e){return e.forEach(t=>Ce(this,t,t)),this},[pe](){return Dn(this)}});const Ur={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Ut(e.MIN_KEY,e.MAX_KEY);return{...e,table:o=>{const s=e.table(o),{schema:u}=s,{primaryKey:c}=u,{extractKey:f,outbound:h}=c,g={...s,mutate:p=>{const _=p.trans,k=_.mutatedParts||(_.mutatedParts={}),B=A=>{const S=`idb://${t}/${o}/${A}`;return k[S]||(k[S]=new Ut)},I=B(""),E=B(":dels"),{type:x}=p;let[F,O]="deleteRange"===p.type?[p.range]:"delete"===p.type?[p.keys]:p.values.length<50?[[],p.values]:[];const P=p.trans._cache;return s.mutate(p).then(A=>{if(j(F)){"delete"!==x&&(F=A.results),I.addKeys(F);const S=ar(F,P);S||"add"===x||E.addKeys(F),(S||O)&&(L=B,tt=S,at=O,u.indexes.forEach(function _t(bt){const ut=L(bt.name||"");function ce(Et){return null!=Et?bt.extractKey(Et):null}const le=Et=>bt.multiEntry&&j(Et)?Et.forEach(te=>ut.addKey(te)):ut.addKey(Et);(tt||at).forEach((Et,te)=>{const Pe=tt&&ce(tt[te]),jn=at&&ce(at[te]);0!==vt(Pe,jn)&&(null!=Pe&&le(Pe),null!=jn&&le(jn))})}))}else if(F){const S={from:F.lower,to:F.upper};E.add(S),I.add(S)}else I.add(n),E.add(n),u.indexes.forEach(S=>B(S.name).add(n));var L,tt,at;return A})}},y=({query:{index:p,range:_}})=>{var k,B;return[p,new Ut(null!==(k=_.lower)&&void 0!==k?k:e.MIN_KEY,null!==(B=_.upper)&&void 0!==B?B:e.MAX_KEY)]},w={get:p=>[c,new Ut(p.key)],getMany:p=>[c,(new Ut).addKeys(p.keys)],count:y,query:y,openCursor:y};return K(w).forEach(p=>{g[p]=function(_){const{subscr:k}=U;if(k){const B=O=>{const P=`idb://${t}/${o}/${O}`;return k[P]||(k[P]=new Ut)},I=B(""),E=B(":dels"),[x,F]=w[p](_);if(B(x.name||"").add(F),!x.isPrimaryKey){if("count"!==p){const O="query"===p&&h&&_.values&&s.query({..._,values:!1});return s[p].apply(this,arguments).then(P=>{if("query"===p){if(h&&_.values)return O.then(({result:S})=>(I.addKeys(S),P));const A=_.values?P.result.map(f):P.result;_.values?I.addKeys(A):E.addKeys(A)}else if("openCursor"===p){const A=P,S=_.values;return A&&Object.create(A,{key:{get:()=>(E.addKey(A.primaryKey),A.key)},primaryKey:{get(){const L=A.primaryKey;return E.addKey(L),L}},value:{get:()=>(S&&I.addKey(A.primaryKey),A.value)}})}return P})}E.add(n)}}return s[p].apply(this,arguments)}}),g}}}};class Jt{constructor(t,n){this._middlewares={},this.verno=0;const o=Jt.dependencies;this._options=n={addons:Jt.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:z,dbReadyPromise:null,cancelOpen:z,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var c,f;u.dbReadyPromise=new C(f=>{u.dbReadyResolve=f}),u.openCanceller=new C((f,h)=>{u.cancelOpen=h}),this._state=u,this.name=t,this.on=ke(this,"populate","blocked","versionchange","close",{ready:[l,z]}),this.on.ready.subscribe=St(this.on.ready.subscribe,f=>(h,g)=>{Jt.vip(()=>{const y=this._state;if(y.openComplete)y.dbOpenError||C.resolve().then(h),g&&f(h);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(h),g&&f(h);else{f(h);const w=this;g||f(function p(){w.on.ready.unsubscribe(h),w.on.ready.unsubscribe(p)})}})}),this.Collection=(c=this,Ie(vr.prototype,function(f,h){this.db=c;let g=Hn,y=null;if(h)try{g=h()}catch(k){y=k}const w=f._ctx,p=w.table,_=p.hook.reading.fire;this._ctx={table:p,index:w.index,isPrimKey:!w.index||p.schema.primKey.keyPath&&w.index===p.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:y,or:w.or,valueMapper:_!==Ot?_:null}})),this.Table=(f=this,Ie(br.prototype,function(h,g,y){this.db=f,this._tx=y,this.name=h,this.schema=g,this.hook=f._allTables[h]?f._allTables[h].hook:ke(null,{creating:[un,z],reading:[an,Ot],updating:[r,z],deleting:[a,z]})})),this.Transaction=function(f){return Ie(Br.prototype,function(h,g,y,w,p){this.db=f,this.mode=h,this.storeNames=g,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=ke(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C((_,k)=>{this._resolve=_,this._reject=k}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},_=>{var k=this.active;return this.active=!1,this.on.error.fire(_),this.parent?this.parent._reject(_):k&&this.idbtrans&&this.idbtrans.abort(),pt(_)})})}(this),this.Version=function(f){return Ie(Sr.prototype,function(h){this.db=f,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(f){return Ie(er.prototype,function(h,g,y){this.db=f,this._ctx={table:h,index:":id"===g?null:g,or:y};const w=f._deps.indexedDB;if(!w)throw new N.MissingAPI;this._cmp=this._ascending=w.cmp.bind(w),this._descending=(p,_)=>w.cmp(_,p),this._max=(p,_)=>w.cmp(p,_)>0?p:_,this._min=(p,_)=>w.cmp(p,_)<0?p:_,this._IDBKeyRange=f._deps.IDBKeyRange})}(this),this.on("versionchange",f=>{f.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",f=>{!f.newVersion||f.newVersion<f.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${f.oldVersion/10}`)}),this._maxKey=Fe(n.IDBKeyRange),this._createTransaction=(f,h,g,y)=>new this.Transaction(f,h,g,this._options.chromeTransactionDurability,y),this._fireOnBlocked=f=>{this.on("blocked").fire(f),Be.filter(h=>h.name===this.name&&h!==this&&!h._state.vcFired).map(h=>h.on("versionchange").fire(f))},this.use(Tr),this.use(Or),this.use(Ur),this.use(Dr),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(f=>f(this))}version(t){if(isNaN(t)||t<.1)throw new N.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new N.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var o=n.filter(s=>s._cfg.version===t)[0];return o||(o=new this.Version(t),n.push(o),n.sort(Ar),o.stores({}),this._state.autoSchema=!1,o)}_whenReady(t){return this.idbdb&&(this._state.openComplete||U.letThrough||this._vip)?t():new C((n,o)=>{if(this._state.openComplete)return o(new N.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void o(new N.DatabaseClosed);this.open().catch(z)}this._state.dbReadyPromise.then(n,o)}).then(t)}use({stack:t,create:n,level:o,name:s}){s&&this.unuse({stack:t,name:s});const u=this._middlewares[t]||(this._middlewares[t]=[]);return u.push({stack:t,create:n,level:o??10,name:s}),u.sort((c,f)=>c.level-f.level),this}unuse({stack:t,name:n,create:o}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(s=>o?s.create!==o:!!n&&s.name!==n)),this}open(){return function Pr(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?pt(t.dbOpenError):e);kt&&(t.openCanceller._stackHolder=xt()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const o=t.openCanceller;function s(){if(t.openCanceller!==o)throw new N.DatabaseClosed("db.open() was cancelled")}let u=t.dbReadyResolve,c=null,f=!1;return C.race([o,(typeof navigator>"u"?C.resolve():Cr()).then(()=>new C((h,g)=>{if(s(),!n)throw new N.MissingAPI;const y=e.name,w=t.autoSchema?n.open(y):n.open(y,Math.round(10*e.verno));if(!w)throw new N.MissingAPI;w.onerror=Rt(g),w.onblocked=ot(e._fireOnBlocked),w.onupgradeneeded=ot(p=>{if(c=w.transaction,t.autoSchema&&!e._options.allowEmptyDB){w.onerror=Ae,c.abort(),w.result.close();const k=n.deleteDatabase(y);k.onsuccess=k.onerror=ot(()=>{g(new N.NoSuchDatabase(`Database ${y} doesnt exist`))})}else{c.onerror=Rt(g);var _=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;f=_<1,e._novip.idbdb=w.result,function Fr(e,t,n,o){const s=e._dbSchema,u=e._createTransaction("readwrite",e._storeNames,s);u.create(n),u._completion.catch(o);const c=u._reject.bind(u),f=U.transless||U;$t(()=>{U.trans=u,U.transless=f,0===t?(K(s).forEach(h=>{kn(n,h,s[h].primKey,s[h].indexes)}),En(e,n),C.follow(()=>e.on.populate.fire(u)).catch(c)):function({_novip:h},g,y,w){const p=[],_=h._versions;let k=h._dbSchema=An(0,h.idbdb,w),B=!1;return _.filter(E=>E._cfg.version>=g).forEach(E=>{p.push(()=>{const x=k,F=E._cfg.dbschema;Fn(h,x,w),Fn(h,F,w),k=h._dbSchema=F;const O=or(x,F);O.add.forEach(A=>{kn(w,A[0],A[1].primKey,A[1].indexes)}),O.change.forEach(A=>{if(A.recreate)throw new N.Upgrade("Not yet support for changing primary key");{const S=w.objectStore(A.name);A.add.forEach(L=>In(S,L)),A.change.forEach(L=>{S.deleteIndex(L.name),In(S,L)}),A.del.forEach(L=>S.deleteIndex(L))}});const P=E._cfg.contentUpgrade;if(P&&E._cfg.version>g){En(h,w),y._memoizedTables={},B=!0;let A=Re(F);O.del.forEach(tt=>{A[tt]=x[tt]}),Bn(h,[h.Transaction.prototype]),Xe(h,[h.Transaction.prototype],K(A),A),y.schema=A;const S=ne(P);let L;S&&oe();const T=C.follow(()=>{if(L=P(y),L&&S){var tt=Dt.bind(null,null);L.then(tt,tt)}});return L&&"function"==typeof L.then?C.resolve(L):T.then(()=>L)}}),p.push(x=>{var F,O;(!B||!gr)&&(F=E._cfg.dbschema,[].slice.call((O=x).db.objectStoreNames).forEach(P=>null==F[P]&&O.db.deleteObjectStore(P))),Bn(h,[h.Transaction.prototype]),Xe(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),y.schema=h._dbSchema})}),function I(){return p.length?C.resolve(p.shift()(y.idbtrans)).then(I):C.resolve()}().then(()=>{var E,x;x=w,K(E=k).forEach(F=>{x.db.objectStoreNames.contains(F)||kn(x,F,E[F].primKey,E[F].indexes)})})}(e,t,u,n).catch(c)})}(e,_/10,c,g)}},g),w.onsuccess=ot(()=>{c=null;const p=e._novip.idbdb=w.result,_=dt(p.objectStoreNames);if(_.length>0)try{const B=p.transaction(1===(k=_).length?k[0]:k,"readonly");t.autoSchema?function({_novip:I},E,x){I.verno=E.version/10;const F=I._dbSchema=An(0,E,x);I._storeNames=dt(E.objectStoreNames,0),Xe(I,[I._allTables],K(F),F)}(e,p,B):(Fn(e,e._dbSchema,B),function(I,E){const x=or(An(0,I.idbdb,E),I._dbSchema);return!(x.add.length||x.change.some(F=>F.add.length||F.change.length))}(e,B)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),En(e,B)}catch{}var k;Be.push(e),p.onversionchange=ot(B=>{t.vcFired=!0,e.on("versionchange").fire(B)}),p.onclose=ot(B=>{e.on("close").fire(B)}),f&&function({indexedDB:B,IDBKeyRange:I},E){!Cn(B)&&"__dbnames"!==E&&Sn(B,I).put({name:E}).catch(z)}(e._deps,y),h()},g)}))]).then(()=>(s(),t.onReadyBeingFired=[],C.resolve(Pn(()=>e.on.ready.fire(e.vip))).then(function h(){if(t.onReadyBeingFired.length>0){let g=t.onReadyBeingFired.reduce(l,z);return t.onReadyBeingFired=[],C.resolve(Pn(()=>g(e.vip))).then(h)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(h=>{t.dbOpenError=h;try{c&&c.abort()}catch{}return o===t.openCanceller&&e._close(),pt(h)}).finally(()=>{t.openComplete=!0,u()})}(this)}_close(){const t=this._state,n=Be.indexOf(this);if(n>=0&&Be.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(o=>{t.dbReadyResolve=o}),t.openCanceller=new C((o,s)=>{t.cancelOpen=s})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new N.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new C((o,s)=>{const u=()=>{this.close();var c=this._deps.indexedDB.deleteDatabase(this.name);c.onsuccess=ot(()=>{(function({indexedDB:f,IDBKeyRange:h},g){!Cn(f)&&"__dbnames"!==g&&Sn(f,h).delete(g).catch(z)})(this._deps,this.name),o()}),c.onerror=Rt(s),c.onblocked=this._fireOnBlocked};if(t)throw new N.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(u):u()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return K(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Rr.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,o){let s=U.trans;s&&s.db===this&&-1===t.indexOf("!")||(s=null);const u=-1!==t.indexOf("?");let c,f;t=t.replace("!","").replace("?","");try{if(f=n.map(g=>{var y=g instanceof this.Table?g.name:g;if("string"!=typeof y)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),"r"==t||"readonly"===t)c="readonly";else{if("rw"!=t&&"readwrite"!=t)throw new N.InvalidArgument("Invalid transaction mode: "+t);c="readwrite"}if(s){if("readonly"===s.mode&&"readwrite"===c){if(!u)throw new N.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&f.forEach(g=>{if(s&&-1===s.storeNames.indexOf(g)){if(!u)throw new N.SubTransaction("Table "+g+" not included in parent transaction.");s=null}}),u&&s&&!s.active&&(s=null)}}catch(g){return s?s._promise(null,(y,w)=>{w(g)}):pt(g)}const h=sr.bind(null,this,c,f,s,o);return s?s._promise(c,h,"lock"):U.trans?se(U.transless,()=>this._whenReady(h)):this._whenReady(h)}table(t){if(!W(this._allTables,t))throw new N.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const jr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Nr{constructor(t){this._subscribe=t}subscribe(t,n,o){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:n,complete:o})}[jr](){return this}}function lr(e,t){return K(t).forEach(n=>{Qe(e[n]||(e[n]=new Ut),t[n])}),e}let Kn;try{Kn={indexedDB:R.indexedDB||R.mozIndexedDB||R.webkitIndexedDB||R.msIndexedDB,IDBKeyRange:R.IDBKeyRange||R.webkitIDBKeyRange}}catch{Kn={indexedDB:null,IDBKeyRange:null}}const Qt=Jt;function tn(e){let t=jt;try{jt=!0,Wt.storagemutated.fire(e)}finally{jt=t}}lt(Qt,{...Tt,delete:e=>new Qt(e,{addons:[]}).delete(),exists:e=>new Qt(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Cn(t)?Promise.resolve(t.databases()).then(o=>o.map(s=>s.name).filter(s=>"__dbnames"!==s)):Sn(t,n).toCollection().primaryKeys()}(Qt.dependencies).then(e)}catch{return pt(new N.MissingAPI)}},defineClass:()=>function(e){m(this,e)},ignoreTransaction:e=>U.trans?se(U.transless,e):e(),vip:Pn,async:function(e){return function(){try{var t=Rn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:C.resolve(t)}catch(n){return pt(n)}}},spawn:function(e,t,n){try{var o=Rn(e.apply(n,t||[]));return o&&"function"==typeof o.then?o:C.resolve(o)}catch(s){return pt(s)}},currentTransaction:{get:()=>U.trans||null},waitFor:function(e,t){const n=C.resolve("function"==typeof e?Qt.ignoreTransaction(e):e).timeout(t||6e4);return U.trans?U.trans.waitFor(n):n},Promise:C,debug:{get:()=>kt,set:e=>{ye(e,"dexie"===e?()=>!0:Yn)}},derive:Y,extend:m,props:lt,override:St,Events:ke,on:Wt,liveQuery:function Mr(e){return new Nr(t=>{const n=ne(e);let o=!1,s={},u={};const c={get closed(){return o},unsubscribe:()=>{o=!0,Wt.storagemutated.unsubscribe(y)}};t.start&&t.start(c);let f=!1,h=!1;function g(){return K(u).some(p=>s[p]&&function Kr(e,t){const n=Dn(t);let o=n.next();if(o.done)return!1;let s=o.value;const u=Dn(e);let c=u.next(s.from),f=c.value;for(;!o.done&&!c.done;){if(vt(f.from,s.to)<=0&&vt(f.to,s.from)>=0)return!0;vt(s.from,f.from)<0?s=(o=n.next(f.from)).value:f=(c=u.next(s.from)).value}return!1}(s[p],u[p]))}const y=p=>{lr(s,p),g()&&w()},w=()=>{if(f||o)return;s={};const p={},_=function(k){n&&oe();const B=()=>$t(e,{subscr:k,trans:null}),I=U.trans?se(U.transless,B):B();return n&&I.then(Dt,Dt),I}(p);h||(Wt("storagemutated",y),h=!0),f=!0,Promise.resolve(_).then(k=>{f=!1,o||(g()?w():(s={},u=p,t.next&&t.next(k)))},k=>{f=!1,t.error&&t.error(k),c.unsubscribe()})};return w(),c})},extendObservabilitySet:lr,getByKeyPath:Ft,setByKeyPath:Bt,delByKeyPath:function(e,t){"string"==typeof t?Bt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Bt(e,n,void 0)})},shallowClone:Re,deepClone:Nt,getObjectDiff:Tn,cmp:vt,asap:Pt,minKey:-1/0,addons:[],connections:Be,errnames:Gt,dependencies:Kn,semVer:"3.2.3",version:"3.2.3".split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Qt.maxKey=Fe(Qt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wt("storagemutated",e=>{if(!jt){let t;Ve?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),jt=!0,dispatchEvent(t),jt=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{jt||tn(e)}));let jt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel("x-storagemutated-1");"function"==typeof e.unref&&e.unref(),Wt("storagemutated",t=>{jt||e.postMessage(t)}),e.onmessage=t=>{t.data&&tn(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Wt("storagemutated",t=>{try{jt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if("x-storagemutated-1"===t.key){const n=JSON.parse(t.newValue);n&&tn(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&"x-storagemutated-1"===t.type&&tn(t.changedParts)})}C.rejectionMapper=function(e,t){if(!e||e instanceof It||e instanceof TypeError||e instanceof SyntaxError||!e.name||!be[e.name])return e;var n=new be[e.name](t||e.message,e);return"stack"in e&&$(n,"stack",{get:function(){return this.inner.stack}}),n},ye(kt,Yn);var Un=V(8274),$r=V(2897);let Lr=(()=>{class e{constructor(n,o){this.http=n,this.ea=o,this.access_token=null,this.config=X.Z.spotify,this.eps={base:{accounts:"https://accounts.spotify.com",api:"https://api.spotify.com"},authorize:"/authorize",api:"/api",token:"/token",version:"/v1",me:{albums:"/me/albums",savedAlbums:"/me/albums/contains"}},this.initDB()}initDB(){this.db=new Jt("spotify"),this.db.version(1).stores({codes:"++id, type, code"}),this.table=this.db.table("codes")}getCode(){var n=this;return(0,D.Z)(function*(){return(yield n.table.get({type:"spotify"}))?.code??null})()}getHeaders(n=!1){const o=G.lW.from(this.config.clientId,"base64").toString(),s=G.lW.from(this.config.clientSecret,"base64").toString(),u=this.access_token?this.access_token:G.lW.from(o+":"+s).toString("base64");return(new ct.WM).set("Authorization",`${this.access_token?"Bearer":"Basic"} ${u}`).set("Content-Type","application/"+(n?"json":"x-www-form-urlencoded"))}getToken(){var n=this;return(0,D.Z)(function*(){let o=yield n.table.get({type:"spotify_tk"}),s=null;if(o)s=JSON.parse(o.code),n.access_token=s.access_token;else{const u=yield n.getCode(),c=new ct.LE({fromObject:{grant_type:"authorization_code",code:u,redirect_uri:`${location.origin}/callback`}}),f=n.getHeaders();s=yield new Promise(h=>{n.http.post(`${n.eps.base.accounts}${n.eps.api}${n.eps.token}`,c.toString(),{headers:f}).subscribe(g=>{(0,D.Z)(function*(){n.access_token=g.access_token,yield n.table.add({type:"spotify_tk",code:JSON.stringify(g)}),h(g)})()})})}return s})()}preSave(){var n=this;return(0,D.Z)(function*(){yield n.getToken(),(yield n.checkNextRelease())||(yield n.storeNextRelease()),n.ea.trigger("toast:add","presave.done.spotify")})()}getStoredAlbums(){var n=this;return(0,D.Z)(function*(){const o=n.getHeaders();return yield new Promise(s=>{n.http.get(`${n.eps.base.api}${n.eps.version}${n.eps.me.albums}`,{headers:o}).subscribe(u=>{s(u)})})})()}checkNextRelease(){var n=this;return(0,D.Z)(function*(){const o=n.getHeaders();return yield new Promise(s=>{n.http.get(`${n.eps.base.api}${n.eps.version}${n.eps.me.savedAlbums}?ids=${X.Z.spotify.nextRelease}`,{headers:o}).subscribe(u=>{s(u[0])})})})()}storeNextRelease(){var n=this;return(0,D.Z)(function*(){const o=n.getHeaders(!0);return yield new Promise(s=>{n.http.put(`${n.eps.base.api}${n.eps.version}${n.eps.me.albums}`,JSON.stringify({ids:[X.Z.spotify.nextRelease]}),{headers:o}).subscribe(c=>{s(c)})})})()}authorize(){var n=this;return(0,D.Z)(function*(){if(yield n.getCode())return"";{const o=G.lW.from(n.config.clientId,"base64").toString(),s=new ct.LE({fromObject:{response_type:"code",client_id:o,scope:"user-follow-modify user-library-modify user-library-read user-follow-read",redirect_uri:`${location.origin}/callback`,state:"SWEETQ"}});return`${n.eps.base.accounts}${n.eps.authorize}?${s.toString()}`}})()}setCode(n){var o=this;return(0,D.Z)(function*(){yield o.table.add({type:"spotify",code:n}),yield o.preSave()})()}static#t=this.\u0275fac=function(o){return new(o||e)(Un.LFG(ct.eN),Un.LFG($r.Y))};static#e=this.\u0275prov=Un.Yz7({token:e,factory:e.\u0275fac})}return e})()},5343:(ee,yt)=>{"use strict";yt.byteLength=function j(M){var $=K(M),ht=$[1];return 3*($[0]+ht)/4-ht},yt.toByteArray=function rt(M){var $,ft,Y=K(M),ht=Y[0],mt=Y[1],st=new ct(function m(M,$,Y){return 3*($+Y)/4-Y}(0,ht,mt)),dt=0,St=mt>0?ht-4:ht;for(ft=0;ft<St;ft+=4)$=D[M.charCodeAt(ft)]<<18|D[M.charCodeAt(ft+1)]<<12|D[M.charCodeAt(ft+2)]<<6|D[M.charCodeAt(ft+3)],st[dt++]=$>>16&255,st[dt++]=$>>8&255,st[dt++]=255&$;return 2===mt&&($=D[M.charCodeAt(ft)]<<2|D[M.charCodeAt(ft+1)]>>4,st[dt++]=255&$),1===mt&&($=D[M.charCodeAt(ft)]<<10|D[M.charCodeAt(ft+1)]<<4|D[M.charCodeAt(ft+2)]>>2,st[dt++]=$>>8&255,st[dt++]=255&$),st},yt.fromByteArray=function lt(M){for(var $,Y=M.length,ht=Y%3,mt=[],dt=0,St=Y-ht;dt<St;dt+=16383)mt.push(W(M,dt,dt+16383>St?St:dt+16383));return 1===ht?mt.push(V[($=M[Y-1])>>2]+V[$<<4&63]+"=="):2===ht&&mt.push(V[($=(M[Y-2]<<8)+M[Y-1])>>10]+V[$>>4&63]+V[$<<2&63]+"="),mt.join("")};for(var V=[],D=[],ct=typeof Uint8Array<"u"?Uint8Array:Array,X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0,R=X.length;G<R;++G)V[G]=X[G],D[X.charCodeAt(G)]=G;function K(M){var $=M.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Y=M.indexOf("=");return-1===Y&&(Y=$),[Y,Y===$?0:4-Y%4]}function J(M){return V[M>>18&63]+V[M>>12&63]+V[M>>6&63]+V[63&M]}function W(M,$,Y){for(var mt=[],st=$;st<Y;st+=3)mt.push(J((M[st]<<16&16711680)+(M[st+1]<<8&65280)+(255&M[st+2])));return mt.join("")}D["-".charCodeAt(0)]=62,D["_".charCodeAt(0)]=63},3172:(ee,yt,V)=>{"use strict";const ct=V(5343),X=V(8461),G="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;yt.lW=m,yt.h2=50;const R=2147483647;function j(a){if(a>R)throw new RangeError('The value "'+a+'" is invalid for option "size"');const r=new Uint8Array(a);return Object.setPrototypeOf(r,m.prototype),r}function m(a,r,i){if("number"==typeof a){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return lt(a)}return rt(a,r,i)}function rt(a,r,i){if("string"==typeof a)return function M(a,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const i=0|St(a,r);let l=j(i);const d=l.write(a,r);return d!==i&&(l=l.slice(0,d)),l}(a,r);if(ArrayBuffer.isView(a))return function Y(a){if(z(a,Uint8Array)){const r=new Uint8Array(a);return ht(r.buffer,r.byteOffset,r.byteLength)}return $(a)}(a);if(null==a)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(z(a,ArrayBuffer)||a&&z(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(a,SharedArrayBuffer)||a&&z(a.buffer,SharedArrayBuffer)))return ht(a,r,i);if("number"==typeof a)throw new TypeError('The "value" argument must not be of type number. Received type number');const l=a.valueOf&&a.valueOf();if(null!=l&&l!==a)return m.from(l,r,i);const d=function mt(a){if(m.isBuffer(a)){const r=0|st(a.length),i=j(r);return 0===i.length||a.copy(i,0,0,r),i}return void 0!==a.length?"number"!=typeof a.length||Ot(a.length)?j(0):$(a):"Buffer"===a.type&&Array.isArray(a.data)?$(a.data):void 0}(a);if(d)return d;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return m.from(a[Symbol.toPrimitive]("string"),r,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function J(a){if("number"!=typeof a)throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function lt(a){return J(a),j(a<0?0:0|st(a))}function $(a){const r=a.length<0?0:0|st(a.length),i=j(r);for(let l=0;l<r;l+=1)i[l]=255&a[l];return i}function ht(a,r,i){if(r<0||a.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<r+(i||0))throw new RangeError('"length" is outside of buffer bounds');let l;return l=void 0===r&&void 0===i?new Uint8Array(a):void 0===i?new Uint8Array(a,r):new Uint8Array(a,r,i),Object.setPrototypeOf(l,m.prototype),l}function st(a){if(a>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return 0|a}function St(a,r){if(m.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||z(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);const i=a.length,l=arguments.length>2&&!0===arguments[2];if(!l&&0===i)return 0;let d=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Gt(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return be(a).length;default:if(d)return l?-1:Gt(a).length;r=(""+r).toLowerCase(),d=!0}}function ft(a,r,i){let l=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(r>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return pe(this,r,i);case"utf8":case"utf-8":return Ct(this,r,i);case"ascii":return rn(this,r,i);case"latin1":case"binary":return de(this,r,i);case"base64":return nn(this,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return on(this,r,i);default:if(l)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),l=!0}}function Pt(a,r,i){const l=a[r];a[r]=a[i],a[i]=l}function he(a,r,i,l,d){if(0===a.length)return-1;if("string"==typeof i?(l=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Ot(i=+i)&&(i=d?0:a.length-1),i<0&&(i=a.length+i),i>=a.length){if(d)return-1;i=a.length-1}else if(i<0){if(!d)return-1;i=0}if("string"==typeof r&&(r=m.from(r,l)),m.isBuffer(r))return 0===r.length?-1:Ft(a,r,i,l,d);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(a,r,i):Uint8Array.prototype.lastIndexOf.call(a,r,i):Ft(a,[r],i,l,d);throw new TypeError("val must be string, number or Buffer")}function Ft(a,r,i,l,d){let Z,b=1,v=a.length,q=r.length;if(void 0!==l&&("ucs2"===(l=String(l).toLowerCase())||"ucs-2"===l||"utf16le"===l||"utf-16le"===l)){if(a.length<2||r.length<2)return-1;b=2,v/=2,q/=2,i/=2}function nt(Q,H){return 1===b?Q[H]:Q.readUInt16BE(H*b)}if(d){let Q=-1;for(Z=i;Z<v;Z++)if(nt(a,Z)===nt(r,-1===Q?0:Z-Q)){if(-1===Q&&(Q=Z),Z-Q+1===q)return Q*b}else-1!==Q&&(Z-=Z-Q),Q=-1}else for(i+q>v&&(i=v-q),Z=i;Z>=0;Z--){let Q=!0;for(let H=0;H<q;H++)if(nt(a,Z+H)!==nt(r,H)){Q=!1;break}if(Q)return Z}return-1}function Bt(a,r,i,l){i=Number(i)||0;const d=a.length-i;l?(l=Number(l))>d&&(l=d):l=d;const b=r.length;let v;for(l>b/2&&(l=b/2),v=0;v<l;++v){const q=parseInt(r.substr(2*v,2),16);if(Ot(q))return v;a[i+v]=q}return v}function Re(a,r,i,l){return Tt(Gt(r,a.length-i),a,i,l)}function en(a,r,i,l){return Tt(function sn(a){const r=[];for(let i=0;i<a.length;++i)r.push(255&a.charCodeAt(i));return r}(r),a,i,l)}function Te(a,r,i,l){return Tt(be(r),a,i,l)}function Oe(a,r,i,l){return Tt(function N(a,r){let i,l,d;const b=[];for(let v=0;v<a.length&&!((r-=2)<0);++v)i=a.charCodeAt(v),l=i>>8,d=i%256,b.push(d),b.push(l);return b}(r,a.length-i),a,i,l)}function nn(a,r,i){return ct.fromByteArray(0===r&&i===a.length?a:a.slice(r,i))}function Ct(a,r,i){i=Math.min(a.length,i);const l=[];let d=r;for(;d<i;){const b=a[d];let v=null,q=b>239?4:b>223?3:b>191?2:1;if(d+q<=i){let nt,Z,Q,H;switch(q){case 1:b<128&&(v=b);break;case 2:nt=a[d+1],128==(192&nt)&&(H=(31&b)<<6|63&nt,H>127&&(v=H));break;case 3:nt=a[d+1],Z=a[d+2],128==(192&nt)&&128==(192&Z)&&(H=(15&b)<<12|(63&nt)<<6|63&Z,H>2047&&(H<55296||H>57343)&&(v=H));break;case 4:nt=a[d+1],Z=a[d+2],Q=a[d+3],128==(192&nt)&&128==(192&Z)&&128==(192&Q)&&(H=(15&b)<<18|(63&nt)<<12|(63&Z)<<6|63&Q,H>65535&&H<1114112&&(v=H))}}null===v?(v=65533,q=1):v>65535&&(v-=65536,l.push(v>>>10&1023|55296),v=56320|1023&v),l.push(v),d+=q}return function fe(a){const r=a.length;if(r<=Nt)return String.fromCharCode.apply(String,a);let i="",l=0;for(;l<r;)i+=String.fromCharCode.apply(String,a.slice(l,l+=Nt));return i}(l)}!(m.TYPED_ARRAY_SUPPORT=function K(){try{const a=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(a,r),42===a.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(a,r,i){return rt(a,r,i)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(a,r,i){return function W(a,r,i){return J(a),a<=0?j(a):void 0!==r?"string"==typeof i?j(a).fill(r,i):j(a).fill(r):j(a)}(a,r,i)},m.allocUnsafe=function(a){return lt(a)},m.allocUnsafeSlow=function(a){return lt(a)},m.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==m.prototype},m.compare=function(r,i){if(z(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),z(i,Uint8Array)&&(i=m.from(i,i.offset,i.byteLength)),!m.isBuffer(r)||!m.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===i)return 0;let l=r.length,d=i.length;for(let b=0,v=Math.min(l,d);b<v;++b)if(r[b]!==i[b]){l=r[b],d=i[b];break}return l<d?-1:d<l?1:0},m.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(r,i){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return m.alloc(0);let l;if(void 0===i)for(i=0,l=0;l<r.length;++l)i+=r[l].length;const d=m.allocUnsafe(i);let b=0;for(l=0;l<r.length;++l){let v=r[l];if(z(v,Uint8Array))b+v.length>d.length?(m.isBuffer(v)||(v=m.from(v)),v.copy(d,b)):Uint8Array.prototype.set.call(d,v,b);else{if(!m.isBuffer(v))throw new TypeError('"list" argument must be an Array of Buffers');v.copy(d,b)}b+=v.length}return d},m.byteLength=St,m.prototype._isBuffer=!0,m.prototype.swap16=function(){const r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<r;i+=2)Pt(this,i,i+1);return this},m.prototype.swap32=function(){const r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<r;i+=4)Pt(this,i,i+3),Pt(this,i+1,i+2);return this},m.prototype.swap64=function(){const r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<r;i+=8)Pt(this,i,i+7),Pt(this,i+1,i+6),Pt(this,i+2,i+5),Pt(this,i+3,i+4);return this},m.prototype.toLocaleString=m.prototype.toString=function(){const r=this.length;return 0===r?"":0===arguments.length?Ct(this,0,r):ft.apply(this,arguments)},m.prototype.equals=function(r){if(!m.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===m.compare(this,r)},m.prototype.inspect=function(){let r="";const i=yt.h2;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},G&&(m.prototype[G]=m.prototype.inspect),m.prototype.compare=function(r,i,l,d,b){if(z(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),!m.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(void 0===i&&(i=0),void 0===l&&(l=r?r.length:0),void 0===d&&(d=0),void 0===b&&(b=this.length),i<0||l>r.length||d<0||b>this.length)throw new RangeError("out of range index");if(d>=b&&i>=l)return 0;if(d>=b)return-1;if(i>=l)return 1;if(this===r)return 0;let v=(b>>>=0)-(d>>>=0),q=(l>>>=0)-(i>>>=0);const nt=Math.min(v,q),Z=this.slice(d,b),Q=r.slice(i,l);for(let H=0;H<nt;++H)if(Z[H]!==Q[H]){v=Z[H],q=Q[H];break}return v<q?-1:q<v?1:0},m.prototype.includes=function(r,i,l){return-1!==this.indexOf(r,i,l)},m.prototype.indexOf=function(r,i,l){return he(this,r,i,l,!0)},m.prototype.lastIndexOf=function(r,i,l){return he(this,r,i,l,!1)},m.prototype.write=function(r,i,l,d){if(void 0===i)d="utf8",l=this.length,i=0;else if(void 0===l&&"string"==typeof i)d=i,l=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(l)?(l>>>=0,void 0===d&&(d="utf8")):(d=l,l=void 0)}const b=this.length-i;if((void 0===l||l>b)&&(l=b),r.length>0&&(l<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let v=!1;for(;;)switch(d){case"hex":return Bt(this,r,i,l);case"utf8":case"utf-8":return Re(this,r,i,l);case"ascii":case"latin1":case"binary":return en(this,r,i,l);case"base64":return Te(this,r,i,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,r,i,l);default:if(v)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),v=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Nt=4096;function rn(a,r,i){let l="";i=Math.min(a.length,i);for(let d=r;d<i;++d)l+=String.fromCharCode(127&a[d]);return l}function de(a,r,i){let l="";i=Math.min(a.length,i);for(let d=r;d<i;++d)l+=String.fromCharCode(a[d]);return l}function pe(a,r,i){const l=a.length;(!r||r<0)&&(r=0),(!i||i<0||i>l)&&(i=l);let d="";for(let b=r;b<i;++b)d+=an[a[b]];return d}function on(a,r,i){const l=a.slice(r,i);let d="";for(let b=0;b<l.length-1;b+=2)d+=String.fromCharCode(l[b]+256*l[b+1]);return d}function et(a,r,i){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+r>i)throw new RangeError("Trying to access beyond buffer length")}function it(a,r,i,l,d,b){if(!m.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>d||r<b)throw new RangeError('"value" argument is out of bounds');if(i+l>a.length)throw new RangeError("Index out of range")}function ne(a,r,i,l,d){Ke(r,l,d,a,i,7);let b=Number(r&BigInt(4294967295));a[i++]=b,b>>=8,a[i++]=b,b>>=8,a[i++]=b,b>>=8,a[i++]=b;let v=Number(r>>BigInt(32)&BigInt(4294967295));return a[i++]=v,v>>=8,a[i++]=v,v>>=8,a[i++]=v,v>>=8,a[i++]=v,i}function kt(a,r,i,l,d){Ke(r,l,d,a,i,7);let b=Number(r&BigInt(4294967295));a[i+7]=b,b>>=8,a[i+6]=b,b>>=8,a[i+5]=b,b>>=8,a[i+4]=b;let v=Number(r>>BigInt(32)&BigInt(4294967295));return a[i+3]=v,v>>=8,a[i+2]=v,v>>=8,a[i+1]=v,v>>=8,a[i]=v,i+8}function ye(a,r,i,l,d,b){if(i+l>a.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function me(a,r,i,l,d){return r=+r,i>>>=0,d||ye(a,0,i,4),X.write(a,r,i,l,23,4),i+4}function De(a,r,i,l,d){return r=+r,i>>>=0,d||ye(a,0,i,8),X.write(a,r,i,l,52,8),i+8}m.prototype.slice=function(r,i){const l=this.length;(r=~~r)<0?(r+=l)<0&&(r=0):r>l&&(r=l),(i=void 0===i?l:~~i)<0?(i+=l)<0&&(i=0):i>l&&(i=l),i<r&&(i=r);const d=this.subarray(r,i);return Object.setPrototypeOf(d,m.prototype),d},m.prototype.readUintLE=m.prototype.readUIntLE=function(r,i,l){r>>>=0,i>>>=0,l||et(r,i,this.length);let d=this[r],b=1,v=0;for(;++v<i&&(b*=256);)d+=this[r+v]*b;return d},m.prototype.readUintBE=m.prototype.readUIntBE=function(r,i,l){r>>>=0,i>>>=0,l||et(r,i,this.length);let d=this[r+--i],b=1;for(;i>0&&(b*=256);)d+=this[r+--i]*b;return d},m.prototype.readUint8=m.prototype.readUInt8=function(r,i){return r>>>=0,i||et(r,1,this.length),this[r]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(r,i){return r>>>=0,i||et(r,2,this.length),this[r]|this[r+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(r,i){return r>>>=0,i||et(r,2,this.length),this[r]<<8|this[r+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(r,i){return r>>>=0,i||et(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(r,i){return r>>>=0,i||et(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},m.prototype.readBigUInt64LE=gt(function(r){It(r>>>=0,"offset");const i=this[r],l=this[r+7];(void 0===i||void 0===l)&&Mt(r,this.length-8);const d=i+256*this[++r]+65536*this[++r]+this[++r]*2**24,b=this[++r]+256*this[++r]+65536*this[++r]+l*2**24;return BigInt(d)+(BigInt(b)<<BigInt(32))}),m.prototype.readBigUInt64BE=gt(function(r){It(r>>>=0,"offset");const i=this[r],l=this[r+7];(void 0===i||void 0===l)&&Mt(r,this.length-8);const d=i*2**24+65536*this[++r]+256*this[++r]+this[++r],b=this[++r]*2**24+65536*this[++r]+256*this[++r]+l;return(BigInt(d)<<BigInt(32))+BigInt(b)}),m.prototype.readIntLE=function(r,i,l){r>>>=0,i>>>=0,l||et(r,i,this.length);let d=this[r],b=1,v=0;for(;++v<i&&(b*=256);)d+=this[r+v]*b;return b*=128,d>=b&&(d-=Math.pow(2,8*i)),d},m.prototype.readIntBE=function(r,i,l){r>>>=0,i>>>=0,l||et(r,i,this.length);let d=i,b=1,v=this[r+--d];for(;d>0&&(b*=256);)v+=this[r+--d]*b;return b*=128,v>=b&&(v-=Math.pow(2,8*i)),v},m.prototype.readInt8=function(r,i){return r>>>=0,i||et(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},m.prototype.readInt16LE=function(r,i){r>>>=0,i||et(r,2,this.length);const l=this[r]|this[r+1]<<8;return 32768&l?4294901760|l:l},m.prototype.readInt16BE=function(r,i){r>>>=0,i||et(r,2,this.length);const l=this[r+1]|this[r]<<8;return 32768&l?4294901760|l:l},m.prototype.readInt32LE=function(r,i){return r>>>=0,i||et(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},m.prototype.readInt32BE=function(r,i){return r>>>=0,i||et(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},m.prototype.readBigInt64LE=gt(function(r){It(r>>>=0,"offset");const i=this[r],l=this[r+7];return(void 0===i||void 0===l)&&Mt(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(l<<24))<<BigInt(32))+BigInt(i+256*this[++r]+65536*this[++r]+this[++r]*2**24)}),m.prototype.readBigInt64BE=gt(function(r){It(r>>>=0,"offset");const i=this[r],l=this[r+7];(void 0===i||void 0===l)&&Mt(r,this.length-8);const d=(i<<24)+65536*this[++r]+256*this[++r]+this[++r];return(BigInt(d)<<BigInt(32))+BigInt(this[++r]*2**24+65536*this[++r]+256*this[++r]+l)}),m.prototype.readFloatLE=function(r,i){return r>>>=0,i||et(r,4,this.length),X.read(this,r,!0,23,4)},m.prototype.readFloatBE=function(r,i){return r>>>=0,i||et(r,4,this.length),X.read(this,r,!1,23,4)},m.prototype.readDoubleLE=function(r,i){return r>>>=0,i||et(r,8,this.length),X.read(this,r,!0,52,8)},m.prototype.readDoubleBE=function(r,i){return r>>>=0,i||et(r,8,this.length),X.read(this,r,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(r,i,l,d){r=+r,i>>>=0,l>>>=0,d||it(this,r,i,l,Math.pow(2,8*l)-1,0);let b=1,v=0;for(this[i]=255&r;++v<l&&(b*=256);)this[i+v]=r/b&255;return i+l},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(r,i,l,d){r=+r,i>>>=0,l>>>=0,d||it(this,r,i,l,Math.pow(2,8*l)-1,0);let b=l-1,v=1;for(this[i+b]=255&r;--b>=0&&(v*=256);)this[i+b]=r/v&255;return i+l},m.prototype.writeUint8=m.prototype.writeUInt8=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,1,255,0),this[i]=255&r,i+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,2,65535,0),this[i]=255&r,this[i+1]=r>>>8,i+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,2,65535,0),this[i]=r>>>8,this[i+1]=255&r,i+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,4,4294967295,0),this[i+3]=r>>>24,this[i+2]=r>>>16,this[i+1]=r>>>8,this[i]=255&r,i+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,4,4294967295,0),this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=255&r,i+4},m.prototype.writeBigUInt64LE=gt(function(r,i=0){return ne(this,r,i,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=gt(function(r,i=0){return kt(this,r,i,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(r,i,l,d){if(r=+r,i>>>=0,!d){const nt=Math.pow(2,8*l-1);it(this,r,i,l,nt-1,-nt)}let b=0,v=1,q=0;for(this[i]=255&r;++b<l&&(v*=256);)r<0&&0===q&&0!==this[i+b-1]&&(q=1),this[i+b]=(r/v>>0)-q&255;return i+l},m.prototype.writeIntBE=function(r,i,l,d){if(r=+r,i>>>=0,!d){const nt=Math.pow(2,8*l-1);it(this,r,i,l,nt-1,-nt)}let b=l-1,v=1,q=0;for(this[i+b]=255&r;--b>=0&&(v*=256);)r<0&&0===q&&0!==this[i+b+1]&&(q=1),this[i+b]=(r/v>>0)-q&255;return i+l},m.prototype.writeInt8=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,1,127,-128),r<0&&(r=255+r+1),this[i]=255&r,i+1},m.prototype.writeInt16LE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,2,32767,-32768),this[i]=255&r,this[i+1]=r>>>8,i+2},m.prototype.writeInt16BE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,2,32767,-32768),this[i]=r>>>8,this[i+1]=255&r,i+2},m.prototype.writeInt32LE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,4,2147483647,-2147483648),this[i]=255&r,this[i+1]=r>>>8,this[i+2]=r>>>16,this[i+3]=r>>>24,i+4},m.prototype.writeInt32BE=function(r,i,l){return r=+r,i>>>=0,l||it(this,r,i,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=255&r,i+4},m.prototype.writeBigInt64LE=gt(function(r,i=0){return ne(this,r,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=gt(function(r,i=0){return kt(this,r,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeFloatLE=function(r,i,l){return me(this,r,i,!0,l)},m.prototype.writeFloatBE=function(r,i,l){return me(this,r,i,!1,l)},m.prototype.writeDoubleLE=function(r,i,l){return De(this,r,i,!0,l)},m.prototype.writeDoubleBE=function(r,i,l){return De(this,r,i,!1,l)},m.prototype.copy=function(r,i,l,d){if(!m.isBuffer(r))throw new TypeError("argument should be a Buffer");if(l||(l=0),!d&&0!==d&&(d=this.length),i>=r.length&&(i=r.length),i||(i=0),d>0&&d<l&&(d=l),d===l||0===r.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),r.length-i<d-l&&(d=r.length-i+l);const b=d-l;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(i,l,d):Uint8Array.prototype.set.call(r,this.subarray(l,d),i),b},m.prototype.fill=function(r,i,l,d){if("string"==typeof r){if("string"==typeof i?(d=i,i=0,l=this.length):"string"==typeof l&&(d=l,l=this.length),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!m.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===r.length){const v=r.charCodeAt(0);("utf8"===d&&v<128||"latin1"===d)&&(r=v)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(i<0||this.length<i||this.length<l)throw new RangeError("Out of range index");if(l<=i)return this;let b;if(i>>>=0,l=void 0===l?this.length:l>>>0,r||(r=0),"number"==typeof r)for(b=i;b<l;++b)this[b]=r;else{const v=m.isBuffer(r)?r:m.from(r,d),q=v.length;if(0===q)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(b=0;b<l-i;++b)this[b+i]=v[b%q]}return this};const xt={};function zt(a,r,i){xt[a]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,delete this.name}get code(){return a}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function ge(a){let r="",i=a.length;const l="-"===a[0]?1:0;for(;i>=l+4;i-=3)r=`_${a.slice(i-3,i)}${r}`;return`${a.slice(0,i)}${r}`}function Ke(a,r,i,l,d,b){if(a>i||a<r){const v="bigint"==typeof r?"n":"";let q;throw q=b>3?0===r||r===BigInt(0)?`>= 0${v} and < 2${v} ** ${8*(b+1)}${v}`:`>= -(2${v} ** ${8*(b+1)-1}${v}) and < 2 ** ${8*(b+1)-1}${v}`:`>= ${r}${v} and <= ${i}${v}`,new xt.ERR_OUT_OF_RANGE("value",q,a)}!function we(a,r,i){It(r,"offset"),(void 0===a[r]||void 0===a[r+i])&&Mt(r,a.length-(i+1))}(l,d,b)}function It(a,r){if("number"!=typeof a)throw new xt.ERR_INVALID_ARG_TYPE(r,"number",a)}function Mt(a,r,i){throw Math.floor(a)!==a?(It(a,i),new xt.ERR_OUT_OF_RANGE(i||"offset","an integer",a)):r<0?new xt.ERR_BUFFER_OUT_OF_BOUNDS:new xt.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${r}`,a)}zt("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),zt("ERR_INVALID_ARG_TYPE",function(a,r){return`The "${a}" argument must be of type number. Received type ${typeof r}`},TypeError),zt("ERR_OUT_OF_RANGE",function(a,r,i){let l=`The value of "${a}" is out of range.`,d=i;return Number.isInteger(i)&&Math.abs(i)>2**32?d=ge(String(i)):"bigint"==typeof i&&(d=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(d=ge(d)),d+="n"),l+=` It must be ${r}. Received ${d}`,l},RangeError);const re=/[^+/0-9A-Za-z-_]/g;function Gt(a,r){let i;r=r||1/0;const l=a.length;let d=null;const b=[];for(let v=0;v<l;++v){if(i=a.charCodeAt(v),i>55295&&i<57344){if(!d){if(i>56319){(r-=3)>-1&&b.push(239,191,189);continue}if(v+1===l){(r-=3)>-1&&b.push(239,191,189);continue}d=i;continue}if(i<56320){(r-=3)>-1&&b.push(239,191,189),d=i;continue}i=65536+(d-55296<<10|i-56320)}else d&&(r-=3)>-1&&b.push(239,191,189);if(d=null,i<128){if((r-=1)<0)break;b.push(i)}else if(i<2048){if((r-=2)<0)break;b.push(i>>6|192,63&i|128)}else if(i<65536){if((r-=3)<0)break;b.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;b.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return b}function be(a){return ct.toByteArray(function Vt(a){if((a=(a=a.split("=")[0]).trim().replace(re,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function Tt(a,r,i,l){let d;for(d=0;d<l&&!(d+i>=r.length||d>=a.length);++d)r[d+i]=a[d];return d}function z(a,r){return a instanceof r||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===r.name}function Ot(a){return a!=a}const an=function(){const a="0123456789abcdef",r=new Array(256);for(let i=0;i<16;++i){const l=16*i;for(let d=0;d<16;++d)r[l+d]=a[i]+a[d]}return r}();function gt(a){return typeof BigInt>"u"?un:a}function un(){throw new Error("BigInt not supported")}},8461:(ee,yt)=>{yt.read=function(V,D,ct,X,G){var R,K,j=8*G-X-1,m=(1<<j)-1,rt=m>>1,J=-7,W=ct?G-1:0,lt=ct?-1:1,M=V[D+W];for(W+=lt,R=M&(1<<-J)-1,M>>=-J,J+=j;J>0;R=256*R+V[D+W],W+=lt,J-=8);for(K=R&(1<<-J)-1,R>>=-J,J+=X;J>0;K=256*K+V[D+W],W+=lt,J-=8);if(0===R)R=1-rt;else{if(R===m)return K?NaN:1/0*(M?-1:1);K+=Math.pow(2,X),R-=rt}return(M?-1:1)*K*Math.pow(2,R-X)},yt.write=function(V,D,ct,X,G,R){var K,j,m,rt=8*R-G-1,J=(1<<rt)-1,W=J>>1,lt=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,M=X?0:R-1,$=X?1:-1,Y=D<0||0===D&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(j=isNaN(D)?1:0,K=J):(K=Math.floor(Math.log(D)/Math.LN2),D*(m=Math.pow(2,-K))<1&&(K--,m*=2),(D+=K+W>=1?lt/m:lt*Math.pow(2,1-W))*m>=2&&(K++,m/=2),K+W>=J?(j=0,K=J):K+W>=1?(j=(D*m-1)*Math.pow(2,G),K+=W):(j=D*Math.pow(2,W-1)*Math.pow(2,G),K=0));G>=8;V[ct+M]=255&j,M+=$,j/=256,G-=8);for(K=K<<G|j,rt+=G;rt>0;V[ct+M]=255&K,M+=$,K/=256,rt-=8);V[ct+M-$]|=128*Y}},5861:(ee,yt,V)=>{"use strict";function D(X,G,R,K,j,m,rt){try{var J=X[m](rt),W=J.value}catch(lt){return void R(lt)}J.done?G(W):Promise.resolve(W).then(K,j)}function ct(X){return function(){var G=this,R=arguments;return new Promise(function(K,j){var m=X.apply(G,R);function rt(W){D(m,K,j,rt,J,"next",W)}function J(W){D(m,K,j,rt,J,"throw",W)}rt(void 0)})}}V.d(yt,{Z:()=>ct})}}]);